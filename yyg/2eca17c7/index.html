<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><script>(()=>{const e=navigator.serviceWorker;e?e.register("/sw.js").then(async e=>{console.log("SWPP 注册成功");try{await e.periodicSync.register("update",{minInterval:864e5})}catch(e){console.log("Periodic Sync 注册失败",e)}}).catch(e=>console.error("SWPP 注册失败",e)):console.warn("当前浏览器不支持 SW")})()</script><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Gitalk自动创建评论Issues | 云野阁</title><meta name="author" content="云野阁"><meta name="copyright" content="云野阁"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="博客加入Gitalk评论后，需要访问相应页面，才在存放评论的仓库创建Issues。本文通过脚本自动访问文章页面完成Gitalk自动创建评论Issues。脚本自attson&#x2F;hexo-gitalk-init: Hexo gitalk 极简初始化脚本基础上修改而来（是在windows本地运行）。 这是一个用于 Hexo 博客的 Gitalk 评论系统自动初始化脚本。它能自动扫描所有文章，识别出尚未创建"><meta property="og:type" content="article"><meta property="og:title" content="Gitalk自动创建评论Issues"><meta property="og:url" content="https://yyg.js.cool/yyg/2eca17c7/index.html"><meta property="og:site_name" content="云野阁"><meta property="og:description" content="博客加入Gitalk评论后，需要访问相应页面，才在存放评论的仓库创建Issues。本文通过脚本自动访问文章页面完成Gitalk自动创建评论Issues。脚本自attson&#x2F;hexo-gitalk-init: Hexo gitalk 极简初始化脚本基础上修改而来（是在windows本地运行）。 这是一个用于 Hexo 博客的 Gitalk 评论系统自动初始化脚本。它能自动扫描所有文章，识别出尚未创建"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://api.mmp.cc/api/pcwallpaper?category=cool&type=jpg"><meta property="article:published_time" content="2025-10-08T14:06:07.000Z"><meta property="article:modified_time" content="2025-10-09T15:36:40.000Z"><meta property="article:author" content="云野阁"><meta property="article:tag" content="博客"><meta property="article:tag" content="魔改"><meta property="article:tag" content="Gitalk"><meta property="article:tag" content="Issues"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://api.mmp.cc/api/pcwallpaper?category=cool&type=jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Gitalk自动创建评论Issues",
  "url": "https://yyg.js.cool/yyg/2eca17c7/",
  "image": "https://api.mmp.cc/api/pcwallpaper?category=cool&type=jpg",
  "datePublished": "2025-10-08T14:06:07.000Z",
  "dateModified": "2025-10-09T15:36:40.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "云野阁",
      "url": "https://yyg.js.cool/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/icon.png"><link rel="canonical" href="https://yyg.js.cool/yyg/2eca17c7/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="manifest" href="/manifest.json"><link rel="apple-touch-icon" sizes="180x180" href="/img/icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/pwa/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/pwa/favicon-16x16.png"><link rel="mask-icon" href="/img/pwa/icon.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://s4.zstatic.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css"><link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/fancyapps-ui/5.0.36/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(()=>{const e={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:e,getScript:(e,t={})=>new Promise((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach(([e,t])=>n.setAttribute(e,t)),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)}),getCSS:(e,t)=>new Promise((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)}),addGlobalFn:(e,t,o=!1,a=window)=>{if(e.startsWith("pjax"))return;const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const t=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},o=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};btf.activateDarkMode=t,btf.activateLightMode=o;const a=e.get("theme"),n=(new Date).getHours();void 0===a?n<=5||n>=19?t():o():"light"===a?o():t();const r=e.get("aside-status");void 0!==r&&document.documentElement.classList.toggle("hide-aside","hide"===r);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.json",preload:!1,top_n_per_article:1,unescape:!1,pagination:{enable:!0,hitsPerPage:8},languages:{hits_empty:"未找到符合您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200,highlightFullpage:!1,highlightMacStyle:!0},copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,infinitegrid:{js:"https://s4.zstatic.net/ajax/libs/egjs-infinitegrid/4.12.0/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyloadPlugin:!0,isAnchor:!1,percent:{toc:!0,rightside:!0},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Gitalk自动创建评论Issues",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><link rel="stylesheet" href="/css/parts.css"><link rel="stylesheet" href="/css/link.css"><script src="https://npm.elemecdn.com/echarts@5.4.3/dist/echarts.min.js"></script><script defer src="https://s4.zstatic.net/ajax/libs/sweetalert2/11.16.1/sweetalert2.all.js"></script><script defer src="/js/lunar.js"></script><script defer src="/js/day.js"></script><script defer src="/sw-dom.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload='this.media="all"'><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/rss2.xml" title="云野阁" type="application/rss+xml"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/icon.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">65</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">118</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">40</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/docs/"><i class="fa-fw fa-solid fa-book-bookmark"></i> <span>教程手册</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-blog"></i> <span>博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li><li><a class="site-page child" href="javascript:randomPost();"><i class="fa-fw fa-solid fa-shuffle"></i> <span>随机一篇</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book-open"></i> <span>文界</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/yygrss/"><i class="fa-fw fa-solid fa-square-rss"></i> <span>瀚文集</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw fa-solid fa-comment-nodes"></i> <span>友文说</span></a></li><li><a class="site-page child" href="/yyghub/"><i class="fa-fw fa-solid fa-shapes"></i> <span>RssWe</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-brands fa-get-pocket"></i> <span>蓝口袋</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/pintree/"><i class="fa-fw fa fa-search-plus"></i> <span>导航</span></a></li><li><a class="site-page child" href="/sand/"><i class="fa-fw fa fa-cube"></i> <span>繁沙</span></a></li><li><a class="site-page child" href="/trip/"><i class="fa-fw fa-solid fa-earth-asia"></i> <span>星游记</span></a></li><li><a class="site-page child" href="/share/"><i class="fa-fw fa-solid fa-star"></i> <span>书•影•音</span></a></li><li><a class="site-page child" href="/focusclock/"><i class="fa-fw fas fa-clock"></i> <span>专注时钟</span></a></li><li><a class="site-page child" href="/yygsee/"><i class="fa-fw fa-solid fa-play"></i> <span>星视</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-comments"></i> <span>聊天室</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fas fa-comment-dots"></i> <span>说说</span></a></li><li><a class="site-page child" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i> <span>心语亭</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-circle-user"></i> <span>更多</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://api.mmp.cc/api/pcwallpaper?category=cool&amp;type=jpg)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gcore.jsdelivr.net/gh/MarsperL/MarsperL.github.io@2.1/img/icon.png" alt="Logo"><span class="site-name">云野阁</span></a><a class="nav-page-title" href="/"><span class="site-name">Gitalk自动创建评论Issues</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i> <span>返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/docs/"><i class="fa-fw fa-solid fa-book-bookmark"></i> <span>教程手册</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-blog"></i> <span>博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li><li><a class="site-page child" href="javascript:randomPost();"><i class="fa-fw fa-solid fa-shuffle"></i> <span>随机一篇</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book-open"></i> <span>文界</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/yygrss/"><i class="fa-fw fa-solid fa-square-rss"></i> <span>瀚文集</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw fa-solid fa-comment-nodes"></i> <span>友文说</span></a></li><li><a class="site-page child" href="/yyghub/"><i class="fa-fw fa-solid fa-shapes"></i> <span>RssWe</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-brands fa-get-pocket"></i> <span>蓝口袋</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/pintree/"><i class="fa-fw fa fa-search-plus"></i> <span>导航</span></a></li><li><a class="site-page child" href="/sand/"><i class="fa-fw fa fa-cube"></i> <span>繁沙</span></a></li><li><a class="site-page child" href="/trip/"><i class="fa-fw fa-solid fa-earth-asia"></i> <span>星游记</span></a></li><li><a class="site-page child" href="/share/"><i class="fa-fw fa-solid fa-star"></i> <span>书•影•音</span></a></li><li><a class="site-page child" href="/focusclock/"><i class="fa-fw fas fa-clock"></i> <span>专注时钟</span></a></li><li><a class="site-page child" href="/yygsee/"><i class="fa-fw fa-solid fa-play"></i> <span>星视</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-comments"></i> <span>聊天室</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fas fa-comment-dots"></i> <span>说说</span></a></li><li><a class="site-page child" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i> <span>心语亭</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-circle-user"></i> <span>更多</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Gitalk自动创建评论Issues</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-10-08T14:06:07.000Z" title="发表于 2025-10-08 22:06:07">2025-10-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-10-09T15:36:40.000Z" title="更新于 2025-10-09 23:36:40">2025-10-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/">博客教程</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/Gitalk%E8%AF%84%E8%AE%BA/">Gitalk评论</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>32分钟</span></span><span class="post-meta-separator">|</span><span data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="umamiPV" data-path="/yyg/2eca17c7/"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>博客加入Gitalk评论后，需要访问相应页面，才在存放评论的仓库创建Issues。本文通过脚本自动访问文章页面完成Gitalk自动创建评论Issues。脚本自<a target="_blank" rel="noopener" href="https://github.com/attson/hexo-gitalk-init">attson/hexo-gitalk-init: Hexo gitalk 极简初始化脚本</a>基础上修改而来（是在windows本地运行）。</p><div class="tip info"><p>这是一个用于 Hexo 博客的 Gitalk 评论系统自动初始化脚本。它能自动扫描所有文章，识别出尚未创建评论 Issue 的页面，并通过模拟浏览器访问来触发 Gitalk 自动完成 Issue 的创建。整个过程结合了缓存机制与 GitHub API 检查，确保高效且准确地完成批量初始化。</p></div><h2 id="功能流程"><a href="#功能流程" class="headerlink" title="功能流程"></a>功能流程</h2><p><strong>初始化配置</strong>：读取配置文件或环境变量</p><p><strong>检查主题配置</strong>：确保 Gitalk 是第一个评论系统</p><p><strong>读取文章</strong>：扫描指定目录下的所有 Markdown 文件</p><p><strong>检查初始化状态</strong>：通过本地缓存或 GitHub API 检查文章是否已初始化（需要 GitHub Personal Access Token）</p><p><strong>浏览器访问</strong>：自动打开浏览器访问未初始化的文章页面，完成Issue创建。</p><p><strong>更新缓存</strong>：记录已处理的文章</p><h2 id="自定义配置项"><a href="#自定义配置项" class="headerlink" title="自定义配置项"></a>自定义配置项</h2><h3 id="配置项说明"><a href="#配置项说明" class="headerlink" title="配置项说明"></a>配置项说明</h3><p>该脚本的配置项可以通过 <strong>配置文件</strong> 或 <strong>环境变量</strong> 两种方式设置。配置文件<code>gitalk_init.conf</code>的路径本身也可以通过环境变量 <code>GITALK_CONFIG_FILE</code> 指定。</p><p><strong>优先级</strong>：配置文件中的设置会覆盖同名的环境变量。如果配置文件中某项未设置，则使用环境变量或代码中定义的默认值。</p><h3 id="GitHub-相关配置"><a href="#GitHub-相关配置" class="headerlink" title="GitHub 相关配置"></a>GitHub 相关配置</h3><p>这些配置项用于连接到 GitHub 仓库，是脚本运行的核心。</p><div class="table-container"><table><thead><tr><th>配置项</th><th>类型</th><th>描述</th><th>默认值</th><th>环境变量</th><th>示例</th></tr></thead><tbody><tr><td><code>username</code></td><td>字符串</td><td>GitHub 用户名或组织名，对应 Gitalk 配置中的 <code>owner</code>。<strong>(必选项)</strong></td><td><code>process.env.GITHUB_REPOSITORY_OWNER</code></td><td><code>GITHUB_REPOSITORY_OWNER</code></td><td><code>my-github-username</code></td></tr><tr><td><code>repo</code></td><td>字符串</td><td>存储评论的 GitHub 仓库名，对应 Gitalk 配置中的 <code>repo</code>。<strong>(必选项)</strong></td><td><code>$&#123;config.username&#125;.github.io</code></td><td><code>GITALK_INIT_REPO</code></td><td><code>my-blog-repo</code></td></tr><tr><td><code>token</code></td><td>字符串</td><td>GitHub Personal Access Token，需要有 <code>repo</code> 权限。<strong>(必选项)</strong></td><td><code>process.env.GITALK_TOKEN</code></td><td><code>GITALK_TOKEN</code></td><td><code>ghp_xxxxxxxxxxxxxxxxxxxx</code></td></tr></tbody></table></div><blockquote><p>token的获取参考文章<a href="https://yyg.js.cool/yyg/5ea27f40/">在Github上使用OsmosFeed搭建在线RSS阅读器（无需服务器） | 云野阁</a>中的<code>设置身份验证令牌</code>部分。</p></blockquote><h3 id="缓存相关配置"><a href="#缓存相关配置" class="headerlink" title="缓存相关配置"></a>缓存相关配置</h3><p>缓存机制可以避免重复处理已经初始化过的文章，提高脚本运行效率。</p><div class="table-container"><table><thead><tr><th>配置项</th><th>类型</th><th>描述</th><th>默认值</th><th>环境变量</th><th>示例</th></tr></thead><tbody><tr><td><code>enableCache</code></td><td>布尔值</td><td>是否启用缓存功能。<strong>(必选项)</strong></td><td><code>true</code></td><td><code>GITALK_INIT_CACHE</code></td><td><code>true</code></td></tr><tr><td><code>cacheFile</code></td><td>字符串</td><td>本地缓存文件的存储路径。</td><td><code>./public/gitalk-init-cache.json</code></td><td><code>GITALK_INIT_CACHE_FILE</code></td><td><code>gitalk-init-cache.json</code></td></tr><tr><td><code>cacheRemote</code></td><td>字符串</td><td>远程缓存文件的 URL。读取优先级：<code>cacheFile</code> &gt; <code>cacheRemote</code>。</td><td><code>https://&#123;repo&#125;/gitalk-init-cache.json</code></td><td><code>GITALK_INIT_CACHE_REMOTE</code></td><td><code>https://my-repo.github.io/gitalk-init-cache.json</code></td></tr></tbody></table></div><h3 id="GitHub-API-相关配置"><a href="#GitHub-API-相关配置" class="headerlink" title="GitHub API 相关配置"></a>GitHub API 相关配置</h3><p>当缓存未命中时，脚本可以通过 GitHub API 直接检查 Issue 是否存在，提供更精确的判断。</p><div class="table-container"><table><thead><tr><th>配置项</th><th>类型</th><th>描述</th><th>默认值</th><th>环境变量</th><th>示例</th></tr></thead><tbody><tr><td><code>enableGithubApiCheck</code></td><td>布尔值</td><td>是否在缓存未命中时，通过 GitHub API 检查 issue 是否存在。</td><td><code>true</code></td><td><code>GITALK_ENABLE_GITHUB_API_CHECK</code></td><td><code>true</code></td></tr><tr><td><code>githubApiTimeout</code></td><td>数字</td><td>GitHub API 请求的超时时间（毫秒）。</td><td><code>5000</code></td><td><code>GITALK_GITHUB_API_TIMEOUT</code></td><td><code>10000</code></td></tr></tbody></table></div><h3 id="文章与博客配置"><a href="#文章与博客配置" class="headerlink" title="文章与博客配置"></a>文章与博客配置</h3><p>这些配置项用于定位您的文章源文件，并正确生成文章的访问链接。</p><div class="table-container"><table><thead><tr><th>配置项</th><th>类型</th><th>描述</th><th>默认值</th><th>环境变量</th><th>示例</th></tr></thead><tbody><tr><td><code>postsDir</code></td><td>字符串</td><td>Hexo 博客文章源文件的目录路径。<strong>(必选项)</strong></td><td><code>source/_posts</code></td><td><code>GITALK_INIT_POSTS_DIR</code></td><td><code>source/_posts</code></td></tr><tr><td><code>hexoUrl</code></td><td>字符串</td><td>Hexo 博客的完整 URL，用于生成文章的访问链接。<strong>(必选项)</strong></td><td><code>https://&#123;repo&#125;</code></td><td><code>HEXO_URL</code></td><td><code>https://my-blog.com</code></td></tr><tr><td><code>hexoPermalink</code></td><td>字符串</td><td>Hexo 的永久链接格式，用于根据文章元数据生成唯一的访问路径，浏览器访问。<strong>(必选项)</strong></td><td><code>:abbrlink.html</code></td><td><code>HEXO_PERMALINK</code></td><td><code>:category/:title.html</code></td></tr></tbody></table></div><h3 id="浏览器自动化配置"><a href="#浏览器自动化配置" class="headerlink" title="浏览器自动化配置"></a>浏览器自动化配置</h3><blockquote><p><strong>注意</strong>：此部分功能仅在 <strong>Windows 平台</strong> 上有效。</p></blockquote><p>这些配置项控制脚本是否自动打开浏览器访问新文章页面，以触发 Gitalk 的初始化。</p><div class="table-container"><table><thead><tr><th>配置项</th><th>类型</th><th>描述</th><th>默认值</th><th>环境变量</th><th>示例</th></tr></thead><tbody><tr><td><code>openInBrowser</code></td><td>布尔值</td><td>是否在发现新文章后，自动打开浏览器访问文章页面。<strong>(必选项)</strong></td><td><code>false</code></td><td><code>GITALK_OPEN_IN_BROWSER</code></td><td><code>true</code></td></tr><tr><td><code>maxPagesToOpen</code></td><td>数字</td><td>每次运行脚本时，最多打开的文章页面数量。<code>0</code> 表示处理所有新文章。</td><td><code>0</code></td><td><code>GITALK_MAX_PAGES_TO_OPEN</code></td><td><code>20</code></td></tr><tr><td><code>browserWaitTime</code></td><td>数字</td><td>在浏览器中打开每个页面后，等待的时长（毫秒）。</td><td><code>3000</code></td><td><code>GITALK_BROWSER_WAIT_TIME</code></td><td><code>5000</code></td></tr><tr><td><code>mouseActiveTime</code></td><td>数字</td><td>在页面上模拟鼠标活动的时长（毫秒）。</td><td><code>2000</code></td><td><code>GITALK_MOUSE_ACTIVE_TIME</code></td><td><code>3000</code></td></tr><tr><td><code>enableMouseMovement</code></td><td>布尔值</td><td>是否在页面上模拟鼠标移动，以确保页面被充分激活。</td><td><code>true</code></td><td><code>GITALK_ENABLE_MOUSE_MOVEMENT</code></td><td><code>true</code></td></tr></tbody></table></div><h3 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h3><p>此配置项用于指定 Butterfly 主题的配置文件路径，以便脚本检查评论系统设置。</p><div class="table-container"><table><thead><tr><th>配置项</th><th>类型</th><th>描述</th><th>默认值</th><th>环境变量</th><th>示例</th></tr></thead><tbody><tr><td><code>butterflyConfigPath</code></td><td>字符串</td><td>Butterfly 主题配置文件路径，用于检查 <code>comments.use</code> 设置。<strong>(必选项)</strong></td><td><code>_config.butterfly.yml</code></td><td><code>BUTTERFLY_CONFIG_PATH</code></td><td><code>source/_data/butterfly.yml</code></td></tr></tbody></table></div><h2 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h2><p>在目录中创建<code>gitalk_init.conf</code>，加入配置项（可加自选）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">username=xxx</span><br><span class="line">repo=xxx</span><br><span class="line">token=xxxxxxxxxxxxxxx</span><br><span class="line">enableCache=true</span><br><span class="line">openInBrowser=true</span><br><span class="line">cacheFile=gitalk-init-cache.json路径</span><br><span class="line">hexoUrl=</span><br><span class="line">hexoPermalink=</span><br><span class="line">postsDir=</span><br><span class="line">configFile=gitalk_init.conf路径</span><br><span class="line">butterflyConfigPath=_config.butterfly.yml路径</span><br></pre></td></tr></table></figure><p>在目录中创建<code>gitalk_init.js</code>，加入以下内容。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> readline = <span class="built_in">require</span>(<span class="string">&#x27;readline&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> https = <span class="built_in">require</span>(<span class="string">&#x27;https&#x27;</span>); <span class="comment">// 用于 GitHub API 请求</span></span><br><span class="line"><span class="keyword">const</span> &#123; exec &#125; = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>); <span class="comment">// 用于执行系统命令</span></span><br><span class="line"><span class="keyword">const</span> &#123; promisify &#125; = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> execPromise = <span class="title function_">promisify</span>(exec);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> config = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新增：从环境变量获取配置文件路径，默认为脚本同目录下的 gitalk_init.conf</span></span><br><span class="line"><span class="keyword">const</span> configFilePath = process.<span class="property">env</span>.<span class="property">GITALK_CONFIG_FILE</span> || path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;gitalk_init.conf&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改：使用可配置的路径而不是固定的路径</span></span><br><span class="line"><span class="keyword">if</span> (fs.<span class="title function_">existsSync</span>(configFilePath)) &#123;</span><br><span class="line">    <span class="comment">// 读取 .conf 文件内容</span></span><br><span class="line">    <span class="keyword">const</span> configContent = fs.<span class="title function_">readFileSync</span>(configFilePath).<span class="title function_">toString</span>(<span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 解析配置文件内容（假设是键值对格式，每行一个配置，格式为 key=value）</span></span><br><span class="line">    <span class="keyword">const</span> configLines = configContent.<span class="title function_">split</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> line <span class="keyword">of</span> configLines) &#123;</span><br><span class="line">        <span class="comment">// 跳过空行和注释行（以 # 开头）</span></span><br><span class="line">        <span class="keyword">if</span> (line.<span class="title function_">trim</span>() === <span class="string">&#x27;&#x27;</span> || line.<span class="title function_">trim</span>().<span class="title function_">startsWith</span>(<span class="string">&#x27;#&#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 分割键值对</span></span><br><span class="line">        <span class="keyword">const</span> [key, ...valueParts] = line.<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (key &amp;&amp; valueParts.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> value = valueParts.<span class="title function_">join</span>(<span class="string">&#x27;=&#x27;</span>).<span class="title function_">trim</span>();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 处理环境变量引用</span></span><br><span class="line">            <span class="keyword">const</span> reg = <span class="regexp">/&#123;process\.env\.[a-zA-Z_\-]&#125;*/gm</span>;</span><br><span class="line">            <span class="keyword">const</span> match = value.<span class="title function_">match</span>(reg);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (match) &#123;</span><br><span class="line">                match.<span class="title function_">forEach</span>(<span class="function"><span class="params">matchItem</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> envKey = matchItem.<span class="title function_">substring</span>(<span class="number">13</span>, matchItem.<span class="property">length</span> - <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">if</span> (process.<span class="property">env</span>[envKey]) &#123;</span><br><span class="line">                        config[key.<span class="title function_">trim</span>()] = value.<span class="title function_">replace</span>(matchItem, process.<span class="property">env</span>[envKey]);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        config[key.<span class="title function_">trim</span>()] = value;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                config[key.<span class="title function_">trim</span>()] = value;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 将字符串值转换为适当的类型</span></span><br><span class="line">            <span class="keyword">if</span> (config[key.<span class="title function_">trim</span>()] === <span class="string">&#x27;true&#x27;</span>) &#123;</span><br><span class="line">                config[key.<span class="title function_">trim</span>()] = <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (config[key.<span class="title function_">trim</span>()] === <span class="string">&#x27;false&#x27;</span>) &#123;</span><br><span class="line">                config[key.<span class="title function_">trim</span>()] = <span class="literal">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(config[key.<span class="title function_">trim</span>()]) &amp;&amp; config[key.<span class="title function_">trim</span>()].<span class="title function_">trim</span>() !== <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">                config[key.<span class="title function_">trim</span>()] = <span class="title class_">Number</span>(config[key.<span class="title function_">trim</span>()]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出使用的配置文件路径</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">`使用配置文件: <span class="subst">$&#123;configFilePath&#125;</span>`</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 配置文件不存在时的提示</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`配置文件不存在: <span class="subst">$&#123;configFilePath&#125;</span>，将使用默认配置或环境变量`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置信息</span></span><br><span class="line">    config = &#123;</span><br><span class="line">        <span class="comment">// GitHub repository 所有者，可以是个人或者组织。对应Gitalk配置中的owner</span></span><br><span class="line">        <span class="attr">username</span>: process.<span class="property">env</span>.<span class="property">GITHUB_REPOSITORY_OWNER</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 储存评论issue的github仓库名，仅需要仓库名字即可。对应 Gitalk配置中的repo</span></span><br><span class="line">        <span class="attr">repo</span>: process.<span class="property">env</span>.<span class="property">GITALK_INIT_REPO</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 从 GitHub 的 Personal access tokens 页面，点击 Generate new token</span></span><br><span class="line">        <span class="attr">token</span>: process.<span class="property">env</span>.<span class="property">GITALK_TOKEN</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 是否启用缓存，启用缓存会将已经初始化的数据写入配置的 outputCacheFile 文件，下一次直接通过缓存文件 outputCacheFile 判断</span></span><br><span class="line">        <span class="attr">enableCache</span>: process.<span class="property">env</span>.<span class="property">GITALK_INIT_CACHE</span> !== <span class="literal">undefined</span> ? process.<span class="property">env</span>.<span class="property">GITALK_INIT_CACHE</span> === <span class="string">&#x27;true&#x27;</span> : <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 缓存文件输出的位置</span></span><br><span class="line">        <span class="attr">cacheFile</span>: process.<span class="property">env</span>.<span class="property">GITALK_INIT_CACHE_FILE</span> || path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./public/gitalk-init-cache.json&#x27;</span>),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 只用于获取缓存的来源，缓存仍然会写到 cacheFile. 读取优先级 cacheFile &gt; cacheRemote. 故cacheFile文件存在时，忽略 cacheRemote</span></span><br><span class="line">        <span class="attr">cacheRemote</span>: process.<span class="property">env</span>.<span class="property">GITALK_INIT_CACHE_REMOTE</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 是否使用 GitHub API 检查 issue 是否存在，如果启用，则会在缓存未命中时通过 API 检查</span></span><br><span class="line">        <span class="attr">enableGithubApiCheck</span>: process.<span class="property">env</span>.<span class="property">GITALK_ENABLE_GITHUB_API_CHECK</span> !== <span class="literal">undefined</span> ? </span><br><span class="line">                              process.<span class="property">env</span>.<span class="property">GITALK_ENABLE_GITHUB_API_CHECK</span> === <span class="string">&#x27;true&#x27;</span> : <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// GitHub API 请求超时时间（毫秒）</span></span><br><span class="line">        <span class="attr">githubApiTimeout</span>: process.<span class="property">env</span>.<span class="property">GITALK_GITHUB_API_TIMEOUT</span> || <span class="number">5000</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">postsDir</span>: process.<span class="property">env</span>.<span class="property">GITALK_INIT_POSTS_DIR</span> || <span class="string">&#x27;source/_posts&#x27;</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Hexo博客URL，可通过环境变量或配置文件设置</span></span><br><span class="line">        <span class="attr">hexoUrl</span>: process.<span class="property">env</span>.<span class="property">HEXO_URL</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Hexo permalink格式，可通过环境变量或配置文件设置</span></span><br><span class="line">        <span class="attr">hexoPermalink</span>: process.<span class="property">env</span>.<span class="property">HEXO_PERMALINK</span> || <span class="string">&#x27;:abbrlink.html&#x27;</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 是否在浏览器中打开文章页面</span></span><br><span class="line">        <span class="attr">openInBrowser</span>: process.<span class="property">env</span>.<span class="property">GITALK_OPEN_IN_BROWSER</span> !== <span class="literal">undefined</span> ? </span><br><span class="line">                       process.<span class="property">env</span>.<span class="property">GITALK_OPEN_IN_BROWSER</span> === <span class="string">&#x27;true&#x27;</span> : <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 浏览器中打开页面后等待的时间（毫秒）</span></span><br><span class="line">        <span class="attr">browserWaitTime</span>: process.<span class="property">env</span>.<span class="property">GITALK_BROWSER_WAIT_TIME</span> || <span class="number">3000</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 每个页面打开后鼠标活动的时间（毫秒）</span></span><br><span class="line">        <span class="attr">mouseActiveTime</span>: process.<span class="property">env</span>.<span class="property">GITALK_MOUSE_ACTIVE_TIME</span> || <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 是否在每个页面上模拟鼠标移动</span></span><br><span class="line">        <span class="attr">enableMouseMovement</span>: process.<span class="property">env</span>.<span class="property">GITALK_ENABLE_MOUSE_MOVEMENT</span> !== <span class="literal">undefined</span> ? </span><br><span class="line">                            process.<span class="property">env</span>.<span class="property">GITALK_ENABLE_MOUSE_MOVEMENT</span> === <span class="string">&#x27;true&#x27;</span> : <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 新增：每次打开的文章页面个数，默认为所有页面</span></span><br><span class="line">        <span class="attr">maxPagesToOpen</span>: process.<span class="property">env</span>.<span class="property">GITALK_MAX_PAGES_TO_OPEN</span> || <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 新增：Butterfly 主题配置文件路径</span></span><br><span class="line">        <span class="attr">butterflyConfigPath</span>: process.<span class="property">env</span>.<span class="property">BUTTERFLY_CONFIG_PATH</span> || <span class="string">&#x27;_config.butterfly.yml&#x27;</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">configInit</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">repo</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        config.<span class="property">repo</span> = <span class="string">`<span class="subst">$&#123;config.username&#125;</span>.github.io`</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">cacheRemote</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        config.<span class="property">cacheRemote</span> = <span class="string">`https://<span class="subst">$&#123;config.repo&#125;</span>/gitalk-init-cache.json`</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">postsDir</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        config.<span class="property">postsDir</span> = <span class="string">&#x27;source/_posts&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">cacheFile</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        config.<span class="property">cacheFile</span> = path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./public/gitalk-init-cache.json&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">enableCache</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        config.<span class="property">enableCache</span> = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">enableGithubApiCheck</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        config.<span class="property">enableGithubApiCheck</span> = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">githubApiTimeout</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        config.<span class="property">githubApiTimeout</span> = <span class="number">5000</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 确保有必要的Hexo配置</span></span><br><span class="line">    <span class="keyword">if</span> (!config.<span class="property">hexoUrl</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;未设置Hexo URL，将使用默认值&#x27;</span>);</span><br><span class="line">        config.<span class="property">hexoUrl</span> = <span class="string">`https://<span class="subst">$&#123;config.repo&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!config.<span class="property">hexoPermalink</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;未设置Hexo Permalink，将使用默认值&#x27;</span>);</span><br><span class="line">        config.<span class="property">hexoPermalink</span> = <span class="string">&#x27;:abbrlink.html&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">openInBrowser</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        config.<span class="property">openInBrowser</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">browserWaitTime</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        config.<span class="property">browserWaitTime</span> = <span class="number">3000</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">mouseActiveTime</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        config.<span class="property">mouseActiveTime</span> = <span class="number">2000</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">enableMouseMovement</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        config.<span class="property">enableMouseMovement</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增：确保maxPagesToOpen有值</span></span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">maxPagesToOpen</span> === <span class="literal">undefined</span> || config.<span class="property">maxPagesToOpen</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        config.<span class="property">maxPagesToOpen</span> = <span class="number">0</span>; <span class="comment">// 0 表示打开所有页面</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增：确保butterflyConfigPath有值</span></span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">butterflyConfigPath</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        config.<span class="property">butterflyConfigPath</span> = <span class="string">&#x27;_config.butterfly.yml&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">configInit</span>(config)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新增：简单解析 Butterfly 主题配置文件，获取 comments.use 配置</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getButterflyCommentsConfig</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 检查文件是否存在</span></span><br><span class="line">        <span class="keyword">if</span> (!fs.<span class="title function_">existsSync</span>(config.<span class="property">butterflyConfigPath</span>)) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">`Butterfly 主题配置文件不存在，请检查<span class="subst">$&#123;config.butterflyConfigPath&#125;</span>文件路径`</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 读取文件内容</span></span><br><span class="line">        <span class="keyword">const</span> content = fs.<span class="title function_">readFileSync</span>(config.<span class="property">butterflyConfigPath</span>, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> lines = content.<span class="title function_">split</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> inCommentsSection = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">let</span> foundUse = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">let</span> useValue = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历每一行</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> line <span class="keyword">of</span> lines) &#123;</span><br><span class="line">            <span class="keyword">const</span> trimmedLine = line.<span class="title function_">trim</span>();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 检查是否进入 comments 部分</span></span><br><span class="line">            <span class="keyword">if</span> (trimmedLine === <span class="string">&#x27;comments:&#x27;</span>) &#123;</span><br><span class="line">                inCommentsSection = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如果已经找到 use 配置，则退出循环</span></span><br><span class="line">            <span class="keyword">if</span> (foundUse) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如果在 comments 部分，并且当前行是 use 配置</span></span><br><span class="line">            <span class="keyword">if</span> (inCommentsSection &amp;&amp; trimmedLine.<span class="title function_">startsWith</span>(<span class="string">&#x27;use:&#x27;</span>)) &#123;</span><br><span class="line">                foundUse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 提取 use 的值</span></span><br><span class="line">                <span class="keyword">const</span> match = trimmedLine.<span class="title function_">match</span>(<span class="regexp">/^use:\s*(.+)$/</span>);</span><br><span class="line">                <span class="keyword">if</span> (match &amp;&amp; match[<span class="number">1</span>]) &#123;</span><br><span class="line">                    useValue = match[<span class="number">1</span>].<span class="title function_">trim</span>();</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 如果值以引号开头和结尾，则去除引号</span></span><br><span class="line">                    <span class="keyword">if</span> ((useValue.<span class="title function_">startsWith</span>(<span class="string">&quot;&#x27;&quot;</span>) &amp;&amp; useValue.<span class="title function_">endsWith</span>(<span class="string">&quot;&#x27;&quot;</span>)) || </span><br><span class="line">                        (useValue.<span class="title function_">startsWith</span>(<span class="string">&#x27;&quot;&#x27;</span>) &amp;&amp; useValue.<span class="title function_">endsWith</span>(<span class="string">&#x27;&quot;&#x27;</span>))) &#123;</span><br><span class="line">                        useValue = useValue.<span class="title function_">substring</span>(<span class="number">1</span>, useValue.<span class="property">length</span> - <span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如果遇到与 comments 同级的其他配置，则退出 comments 部分</span></span><br><span class="line">            <span class="keyword">if</span> (inCommentsSection &amp;&amp; trimmedLine &amp;&amp; !trimmedLine.<span class="title function_">startsWith</span>(<span class="string">&#x27; &#x27;</span>) &amp;&amp; !trimmedLine.<span class="title function_">startsWith</span>(<span class="string">&#x27;\t&#x27;</span>) &amp;&amp; !trimmedLine.<span class="title function_">startsWith</span>(<span class="string">&#x27;#&#x27;</span>)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (trimmedLine !== <span class="string">&#x27;comments:&#x27;</span>) &#123;</span><br><span class="line">                    inCommentsSection = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!foundUse) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">`在 <span class="subst">$&#123;config.butterflyConfigPath&#125;</span> 中未找到 comments.use 配置`</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> useValue;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">`解析 Butterfly 主题配置文件时出错: <span class="subst">$&#123;error.message&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新增：检查 Butterfly 主题配置文件中的评论系统设置</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkButterflyCommentsConfig</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 获取 comments.use 配置值</span></span><br><span class="line">    <span class="keyword">const</span> commentsUse = <span class="title function_">getButterflyCommentsConfig</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!commentsUse) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 分割评论系统列表</span></span><br><span class="line">    <span class="keyword">const</span> commentSystems = commentsUse.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>).<span class="title function_">map</span>(<span class="function"><span class="params">s</span> =&gt;</span> s.<span class="title function_">trim</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 检查 Gitalk 是否在评论系统中</span></span><br><span class="line">    <span class="keyword">const</span> gitalkIndex = commentSystems.<span class="title function_">indexOf</span>(<span class="string">&#x27;Gitalk&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (gitalkIndex === -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">`Gitalk 不在当前启用的评论系统中。当前启用的评论系统: <span class="subst">$&#123;commentSystems.join(<span class="string">&#x27;, &#x27;</span>)&#125;</span>`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`请修改 <span class="subst">$&#123;config.butterflyConfigPath&#125;</span> 文件中的 comments.use 配置，将 Gitalk 设为第一个评论系统`</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (gitalkIndex !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`Gitalk 不是第一个评论系统（当前是第 <span class="subst">$&#123;gitalkIndex + <span class="number">1</span>&#125;</span> 个）。当前启用的评论系统: <span class="subst">$&#123;commentSystems.join(<span class="string">&#x27;, &#x27;</span>)&#125;</span>`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`请修改 <span class="subst">$&#123;config.butterflyConfigPath&#125;</span> 文件中的 comments.use 配置，将 Gitalk 设为第一个评论系统`</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">`Gitalk是所选评论系统，脚本将继续执行`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> autoGitalkInit = &#123;</span><br><span class="line">    <span class="attr">gitalkCache</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="title function_">getFiles</span> (dir, files_) &#123;</span><br><span class="line">        files_ = files_ || [];</span><br><span class="line">        <span class="keyword">const</span> files = fs.<span class="title function_">readdirSync</span>(dir);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> files) &#123;</span><br><span class="line">            <span class="keyword">let</span> name = dir + <span class="string">&#x27;/&#x27;</span> + files[i];</span><br><span class="line">            <span class="keyword">if</span> (fs.<span class="title function_">statSync</span>(name).<span class="title function_">isDirectory</span>()) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">getFiles</span>(name, files_);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (name.<span class="title function_">endsWith</span>(<span class="string">&#x27;.md&#x27;</span>)) &#123;</span><br><span class="line">                    files_.<span class="title function_">push</span>(name);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> files_;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">readItem</span>(<span class="params">file</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> fileStream = fs.<span class="title function_">createReadStream</span>(file);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> rl = readline.<span class="title function_">createInterface</span>(&#123;</span><br><span class="line">            <span class="attr">input</span>: fileStream,</span><br><span class="line">            <span class="attr">crlfDelay</span>: <span class="title class_">Infinity</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// Note: we use the crlfDelay option to recognize all instances of CR LF</span></span><br><span class="line">        <span class="comment">// (&#x27;\r\n&#x27;) in input.txt as a single line break.</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> start = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">let</span> frontMatterEnded = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">let</span> post = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> <span class="title function_">await</span> (<span class="keyword">const</span> line <span class="keyword">of</span> rl) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!frontMatterEnded) &#123;</span><br><span class="line">                <span class="keyword">if</span> (start === <span class="literal">true</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (line.<span class="title function_">trim</span>() === <span class="string">&#x27;---&#x27;</span>) &#123;</span><br><span class="line">                        frontMatterEnded = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">const</span> items = line.<span class="title function_">split</span>(<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">                    <span class="comment">// 解析所有可能用到的字段</span></span><br><span class="line">                    <span class="keyword">const</span> key = items[<span class="number">0</span>].<span class="title function_">trim</span>();</span><br><span class="line">                    <span class="keyword">if</span> (key &amp;&amp; items.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                        <span class="comment">// 去除值两端的引号和空格</span></span><br><span class="line">                        <span class="keyword">let</span> value = items.<span class="title function_">slice</span>(<span class="number">1</span>).<span class="title function_">join</span>(<span class="string">&#x27;:&#x27;</span>).<span class="title function_">trim</span>();</span><br><span class="line">                        <span class="keyword">if</span> ((value.<span class="title function_">startsWith</span>(<span class="string">&quot;&#x27;&quot;</span>) &amp;&amp; value.<span class="title function_">endsWith</span>(<span class="string">&quot;&#x27;&quot;</span>)) || </span><br><span class="line">                            (value.<span class="title function_">startsWith</span>(<span class="string">&#x27;&quot;&#x27;</span>) &amp;&amp; value.<span class="title function_">endsWith</span>(<span class="string">&#x27;&quot;&#x27;</span>))) &#123;</span><br><span class="line">                            value = value.<span class="title function_">substring</span>(<span class="number">1</span>, value.<span class="property">length</span> - <span class="number">1</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        post[key] = value;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (line.<span class="title function_">trim</span>() === <span class="string">&#x27;---&#x27;</span>) &#123;</span><br><span class="line">                        start = <span class="literal">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fileStream.<span class="title function_">close</span>()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Object</span>.<span class="title function_">keys</span>(post).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`gitalk: warn read empty from: <span class="subst">$&#123;file&#125;</span>`</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (post[<span class="string">&#x27;comment&#x27;</span>] === <span class="literal">false</span> || post[<span class="string">&#x27;comment&#x27;</span>] === <span class="string">&#x27;false&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[36m%s\x1b[0m`</span>, <span class="string">`gitalk: ignore by comment = <span class="subst">$&#123;post[<span class="string">&#x27;comment&#x27;</span>]&#125;</span> : <span class="subst">$&#123;file&#125;</span>`</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!(<span class="string">&#x27;title&#x27;</span> <span class="keyword">in</span> post)) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">`gitalk: ignore because the title miss: <span class="subst">$&#123;file&#125;</span>`</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果permalink格式包含:abbrlink但没有abbrlink字段，则忽略</span></span><br><span class="line">        <span class="keyword">if</span> (config.<span class="property">hexoPermalink</span>.<span class="title function_">includes</span>(<span class="string">&#x27;:abbrlink&#x27;</span>) &amp;&amp; !(<span class="string">&#x27;abbrlink&#x27;</span> <span class="keyword">in</span> post)) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">`gitalk忽略<span class="subst">$&#123;file&#125;</span>,因为缺少abbrlink，它需要永久链接`</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置默认值</span></span><br><span class="line">        <span class="keyword">if</span> (!(<span class="string">&#x27;date&#x27;</span> <span class="keyword">in</span> post)) &#123;</span><br><span class="line">            post[<span class="string">&#x27;date&#x27;</span>] = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!(<span class="string">&#x27;categories&#x27;</span> <span class="keyword">in</span> post)) &#123;</span><br><span class="line">            post[<span class="string">&#x27;categories&#x27;</span>] = [];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!(<span class="string">&#x27;tags&#x27;</span> <span class="keyword">in</span> post)) &#123;</span><br><span class="line">            post[<span class="string">&#x27;tags&#x27;</span>] = [];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> post</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">readPosts</span>(<span class="params">dir</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> posts = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> file <span class="keyword">of</span> <span class="variable language_">this</span>.<span class="title function_">getFiles</span>(dir)) &#123;</span><br><span class="line">            <span class="keyword">const</span> post = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">readItem</span>(file);</span><br><span class="line">            <span class="keyword">if</span> (post != <span class="literal">null</span>) &#123;</span><br><span class="line">                posts.<span class="title function_">push</span>(post)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> posts</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过远程地址获取缓存内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;Object&gt;</span>&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">getRemoteCache</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> req = https.<span class="title function_">get</span>(config.<span class="property">cacheRemote</span>, <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">                <span class="keyword">const</span> chunks = [];</span><br><span class="line"></span><br><span class="line">                res.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span> (<span class="params">chunk</span>) &#123;</span><br><span class="line">                    chunks.<span class="title function_">push</span>(chunk);</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">                res.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="title function_">resolve</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">Buffer</span>.<span class="title function_">concat</span>(chunks).<span class="title function_">toString</span>()));</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="title function_">reject</span>(e);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">                res.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="title function_">reject</span>(error);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            req.<span class="title function_">end</span>();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过 GitHub API 检查 issue 是否存在</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; title issue 标题（文章标题）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;boolean&gt;</span>&#125; true 表示 issue 已存在，false 表示不存在</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">checkIssueByGithubAPI</span>(<span class="params">title</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!config.<span class="property">enableGithubApiCheck</span> || !config.<span class="property">token</span> || !config.<span class="property">username</span> || !config.<span class="property">repo</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 构造 API 请求 URL</span></span><br><span class="line">            <span class="keyword">const</span> apiUrl = <span class="string">`https://api.github.com/repos/<span class="subst">$&#123;config.username&#125;</span>/<span class="subst">$&#123;config.repo&#125;</span>/issues?state=all`</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> options = &#123;</span><br><span class="line">                <span class="attr">headers</span>: &#123;</span><br><span class="line">                    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;gitalk-init&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">`token <span class="subst">$&#123;config.token&#125;</span>`</span>,</span><br><span class="line">                    <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;application/vnd.github.v3+json&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">timeout</span>: config.<span class="property">githubApiTimeout</span></span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> req = https.<span class="title function_">get</span>(apiUrl, options, <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> data = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">                res.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">chunk</span>) =&gt;</span> &#123;</span><br><span class="line">                    data += chunk;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">                res.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (res.<span class="property">statusCode</span> === <span class="number">200</span>) &#123;</span><br><span class="line">                            <span class="keyword">const</span> issues = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(data);</span><br><span class="line">                            <span class="comment">// 检查是否有匹配标题的 issue</span></span><br><span class="line">                            <span class="keyword">const</span> exists = issues.<span class="title function_">some</span>(<span class="function"><span class="params">issue</span> =&gt;</span> issue.<span class="property">title</span> === title);</span><br><span class="line">                            <span class="title function_">resolve</span>(exists);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`GitHub API 请求失败，状态码: <span class="subst">$&#123;res.statusCode&#125;</span>`</span>);</span><br><span class="line">                            <span class="title function_">resolve</span>(<span class="literal">false</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">`解析 GitHub API 响应失败: <span class="subst">$&#123;error.message&#125;</span>`</span>);</span><br><span class="line">                        <span class="title function_">resolve</span>(<span class="literal">false</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            req.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">`GitHub API 请求错误: <span class="subst">$&#123;error.message&#125;</span>`</span>);</span><br><span class="line">                <span class="title function_">resolve</span>(<span class="literal">false</span>);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            req.<span class="title function_">on</span>(<span class="string">&#x27;timeout&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`GitHub API 请求超时`</span>);</span><br><span class="line">                req.<span class="title function_">destroy</span>();</span><br><span class="line">                <span class="title function_">resolve</span>(<span class="literal">false</span>);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            req.<span class="title function_">end</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过缓存判断是否已经初始化, 优先加载缓存文件，文件不存在则尝试从 cacheRemote 获取</span></span><br><span class="line"><span class="comment">     * 如果缓存中不存在且启用了 GitHub API 检查，则通过 API 检查 issue 是否存在</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; pathname 文章路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; title 文章标题（用于 GitHub API 检查）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="type">Promise&lt;boolean&gt;</span>&#125; false 表示没初始化， true 表示已经初始化</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">getIsInitByCache</span>(<span class="params">pathname, title</span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> isInitialized = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 首先检查本地缓存</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">gitalkCache</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 判断缓存文件是否存在</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">gitalkCache</span> = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">gitalkCache</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(fs.<span class="title function_">readFileSync</span>(config.<span class="property">cacheFile</span>).<span class="title function_">toString</span>(<span class="string">&#x27;utf-8&#x27;</span>));</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">&#x27;读取缓存文件成功 &#x27;</span> + config.<span class="property">cacheFile</span>)</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                <span class="comment">// 检查错误类型，如果是文件不存在，则创建空缓存文件</span></span><br><span class="line">                <span class="keyword">if</span> (e.<span class="property">code</span> === <span class="string">&#x27;ENOENT&#x27;</span>) &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">&#x27;缓存文件不存在，正在创建空缓存文件: &#x27;</span> + config.<span class="property">cacheFile</span>);</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="comment">// 确保目录存在</span></span><br><span class="line">                        <span class="keyword">const</span> dir = path.<span class="title function_">dirname</span>(config.<span class="property">cacheFile</span>);</span><br><span class="line">                        <span class="keyword">if</span> (!fs.<span class="title function_">existsSync</span>(dir)) &#123;</span><br><span class="line">                            fs.<span class="title function_">mkdirSync</span>(dir, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// 创建空缓存文件</span></span><br><span class="line">                        fs.<span class="title function_">writeFileSync</span>(config.<span class="property">cacheFile</span>, <span class="string">&#x27;[]&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">                        <span class="variable language_">this</span>.<span class="property">gitalkCache</span> = [];</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">&#x27;成功创建空缓存文件: &#x27;</span> + config.<span class="property">cacheFile</span>);</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (createError) &#123;</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">&#x27;创建缓存文件失败: &#x27;</span> + createError.<span class="property">message</span>);</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">&#x27;缓存文件路径: &#x27;</span> + config.<span class="property">cacheFile</span>);</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// 如果是其他错误，输出错误信息和路径</span></span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">&#x27;读取缓存文件失败: &#x27;</span> + e.<span class="property">message</span>);</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">&#x27;缓存文件路径: &#x27;</span> + config.<span class="property">cacheFile</span>);</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (config.<span class="property">cacheRemote</span>) &#123;</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[90m%s\x1b[0m`</span>, <span class="string">&#x27;正在从 &#x27;</span> + config.<span class="property">cacheRemote</span> + <span class="string">&#x27; 读取文件&#x27;</span>)</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="variable language_">this</span>.<span class="property">gitalkCache</span> = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">getRemoteCache</span>()</span><br><span class="line">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">&#x27;读取缓存文件成功 &#x27;</span> + config.<span class="property">cacheRemote</span>)</span><br><span class="line">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (remoteError) &#123;</span><br><span class="line">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">&#x27;读取远程缓存文件失败: &#x27;</span> + remoteError.<span class="property">message</span>);</span><br><span class="line">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">&#x27;远程缓存文件路径: &#x27;</span> + config.<span class="property">cacheRemote</span>);</span><br><span class="line">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 检查缓存中是否存在</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">gitalkCache</span> &amp;&amp; <span class="title class_">Array</span>.<span class="title function_">isArray</span>(<span class="variable language_">this</span>.<span class="property">gitalkCache</span>)) &#123;</span><br><span class="line">            isInitialized = <span class="variable language_">this</span>.<span class="property">gitalkCache</span>.<span class="title function_">some</span>(<span class="function">(<span class="params">&#123;pathname: itemPath&#125;</span>) =&gt;</span> itemPath === pathname);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果缓存中不存在且启用了 GitHub API 检查，则通过 API 检查</span></span><br><span class="line">        <span class="keyword">if</span> (!isInitialized &amp;&amp; config.<span class="property">enableGithubApiCheck</span> &amp;&amp; title) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[90m%s\x1b[0m`</span>, <span class="string">`本地缓存中未找到，正在通过 GitHub API 检查文章 &quot;<span class="subst">$&#123;title&#125;</span>&quot; 的 issue...`</span>);</span><br><span class="line">            isInitialized = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">checkIssueByGithubAPI</span>(title);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如果通过 API 发现 issue 已存在，则更新缓存</span></span><br><span class="line">            <span class="keyword">if</span> (isInitialized &amp;&amp; config.<span class="property">enableCache</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">gitalkCache</span> = <span class="variable language_">this</span>.<span class="property">gitalkCache</span> || [];</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">gitalkCache</span>.<span class="title function_">push</span>(&#123; pathname &#125;);</span><br><span class="line">                <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">write</span>(config.<span class="property">cacheFile</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">gitalkCache</span>, <span class="literal">null</span>, <span class="number">2</span>));</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">`通过 GitHub API 发现 issue 已存在，已更新缓存`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> isInitialized;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 写入内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; fileName 文件名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; content 内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">flag</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">write</span>(<span class="params">fileName, content, flag = <span class="string">&#x27;w+&#x27;</span></span>) &#123;</span><br><span class="line">        <span class="comment">// 确保目录存在</span></span><br><span class="line">        <span class="keyword">const</span> dir = path.<span class="title function_">dirname</span>(fileName);</span><br><span class="line">        <span class="keyword">if</span> (!fs.<span class="title function_">existsSync</span>(dir)) &#123;</span><br><span class="line">            fs.<span class="title function_">mkdirSync</span>(dir, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">            fs.<span class="title function_">open</span>(fileName, flag, <span class="keyword">function</span> (<span class="params">err, fd</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>([err, <span class="literal">false</span>]);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                fs.<span class="title function_">writeFile</span>(fd, content, <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>([err, <span class="literal">false</span>]);</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    fs.<span class="title function_">close</span>(fd, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                            <span class="title function_">resolve</span>([err, <span class="literal">false</span>]);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="title function_">resolve</span>([<span class="literal">false</span>, <span class="literal">true</span>]);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在Windows平台模拟鼠标移动</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">simulateMouseMovement</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Windows系统下使用PowerShell模拟鼠标移动</span></span><br><span class="line">            <span class="keyword">const</span> moveScript = <span class="string">`</span></span><br><span class="line"><span class="string">                Add-Type -AssemblyName System.Windows.Forms</span></span><br><span class="line"><span class="string">                $screen = [System.Windows.Forms.Screen]::PrimaryScreen.Bounds</span></span><br><span class="line"><span class="string">                for ($i = 0; $i -lt 5; $i++) &#123;</span></span><br><span class="line"><span class="string">                    $x = Get-Random -Minimum 100 -Maximum ($screen.Width - 100)</span></span><br><span class="line"><span class="string">                    $y = Get-Random -Minimum 100 -Maximum ($screen.Height - 100)</span></span><br><span class="line"><span class="string">                    [System.Windows.Forms.Cursor]::Position = New-Object System.Drawing.Point($x, $y)</span></span><br><span class="line"><span class="string">                    Start-Sleep -Milliseconds 300</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            `</span>;</span><br><span class="line">            <span class="keyword">await</span> <span class="title function_">execPromise</span>(<span class="string">`powershell -Command &quot;<span class="subst">$&#123;moveScript&#125;</span>&quot;`</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`模拟鼠标移动失败: <span class="subst">$&#123;e.message&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在Windows平台打开浏览器</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; url 要打开的URL</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">openBrowser</span>(<span class="params">url</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">await</span> <span class="title function_">execPromise</span>(<span class="string">`start &quot;&quot; &quot;<span class="subst">$&#123;url&#125;</span>&quot;`</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`已打开浏览器访问`</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`打开浏览器时出错: <span class="subst">$&#123;error.message&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在Windows平台关闭浏览器</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">closeBrowser</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">await</span> <span class="title function_">execPromise</span>(<span class="string">`taskkill /F /IM chrome.exe 2&gt;nul || taskkill /F /IM msedge.exe 2&gt;nul || taskkill /F /IM firefox.exe 2&gt;nul`</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">`已关闭浏览器`</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`关闭浏览器时出现非致命错误: <span class="subst">$&#123;error.message&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 逐个打开URL，同时模拟鼠标活动，最后统一关闭浏览器</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">Array&lt;Object&gt;</span>&#125; urls 要打开的URL数组，每个元素包含url和title属性</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; waitTime 每个页面等待的时间（毫秒）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; maxPages 要打开的最大页面数，0表示打开所有页面</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">openUrlsSequentially</span>(<span class="params">urls, waitTime, maxPages = <span class="number">0</span></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!urls || urls.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`没有需要打开的页面`</span>);                                                                            </span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据maxPages限制要打开的页面数量</span></span><br><span class="line">        <span class="keyword">const</span> urlsToOpen = maxPages &gt; <span class="number">0</span> ? urls.<span class="title function_">slice</span>(<span class="number">0</span>, maxPages) : urls;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">`准备逐个打开 <span class="subst">$&#123;urlsToOpen.length&#125;</span> 个页面...`</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">            <span class="comment">// 逐个打开URL</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; urlsToOpen.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">const</span> urlObj = urlsToOpen[i];</span><br><span class="line">                <span class="keyword">const</span> url = urlObj.<span class="property">url</span>;</span><br><span class="line">                <span class="keyword">const</span> title = urlObj.<span class="property">title</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 显示标题信息</span></span><br><span class="line">                <span class="keyword">if</span> (title) &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">`[<span class="subst">$&#123;title&#125;</span>]----准备打开文章内容`</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`正在打开页面 <span class="subst">$&#123;i + <span class="number">1</span>&#125;</span>/<span class="subst">$&#123;urlsToOpen.length&#125;</span>: <span class="subst">$&#123;url&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 打开浏览器</span></span><br><span class="line">                <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">openBrowser</span>(url);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 等待页面加载</span></span><br><span class="line">                <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">1000</span>));</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 如果启用了鼠标移动，则模拟鼠标移动</span></span><br><span class="line">                <span class="keyword">if</span> (config.<span class="property">enableMouseMovement</span>) &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`正在模拟鼠标活动...`</span>);</span><br><span class="line">                    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">simulateMouseMovement</span>();</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 等待鼠标活动时间</span></span><br><span class="line">                    <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, config.<span class="property">mouseActiveTime</span>));</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 等待剩余时间</span></span><br><span class="line">                <span class="keyword">const</span> remainingTime = waitTime - <span class="number">1000</span> - (config.<span class="property">enableMouseMovement</span> ? config.<span class="property">mouseActiveTime</span> : <span class="number">0</span>);</span><br><span class="line">                <span class="keyword">if</span> (remainingTime &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, remainingTime));</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`页面处理完成`</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            <span class="comment">// 统一关闭浏览器</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">`所有页面处理完成，正在关闭浏览器...`</span>);</span><br><span class="line">            <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">closeBrowser</span>();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`处理URL时出错: <span class="subst">$&#123;error.message&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分批打开URL，每批处理指定数量的页面</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">Array&lt;Object&gt;</span>&#125; urls 要打开的URL数组，每个元素包含url和title属性</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; waitTime 每个页面等待的时间（毫秒）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; batchSize 每批处理的页面数量</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">openUrlsInBatches</span>(<span class="params">urls, waitTime, batchSize</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!urls || urls.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`没有需要打开的页面`</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> totalUrls = urls.<span class="property">length</span>;</span><br><span class="line">        <span class="keyword">let</span> processedCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> batchCount = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (processedCount &lt; totalUrls) &#123;</span><br><span class="line">            <span class="keyword">const</span> remainingUrls = totalUrls - processedCount;</span><br><span class="line">            <span class="keyword">const</span> currentBatchSize = <span class="title class_">Math</span>.<span class="title function_">min</span>(batchSize, remainingUrls);</span><br><span class="line">            <span class="keyword">const</span> currentBatch = urls.<span class="title function_">slice</span>(processedCount, processedCount + currentBatchSize);</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">`##########################################第 <span class="subst">$&#123;batchCount&#125;</span> 批##########################################`</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`正在处理第 <span class="subst">$&#123;batchCount&#125;</span> 批，共 <span class="subst">$&#123;currentBatchSize&#125;</span> 个页面（剩余 <span class="subst">$&#123;remainingUrls - currentBatchSize&#125;</span> 个）`</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 处理当前批次</span></span><br><span class="line">            <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">openUrlsSequentially</span>(currentBatch, waitTime, currentBatchSize);</span><br><span class="line"></span><br><span class="line">            processedCount += currentBatchSize;</span><br><span class="line">            batchCount++;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如果还有未处理的页面，等待一段时间再处理下一批</span></span><br><span class="line">            <span class="keyword">if</span> (processedCount &lt; totalUrls) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[36m%s\x1b[0m`</span>, <span class="string">`第 <span class="subst">$&#123;batchCount - <span class="number">1</span>&#125;</span> 批处理完成，等待 5 秒后处理下一批...`</span>);</span><br><span class="line">                <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">5000</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">`########################################所有批次处理完成########################################`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据Hexo permalink格式生成文章路径</span></span><br><span class="line">    <span class="title function_">generatePermalink</span>(<span class="params">post</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; hexoPermalink &#125; = config;</span><br><span class="line">        <span class="keyword">const</span> &#123; abbrlink, title, date, categories, year, month, day, hour, minute, second &#125; = post;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> permalinkStr = hexoPermalink;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 处理日期</span></span><br><span class="line">        <span class="keyword">const</span> dateObj = date ? <span class="keyword">new</span> <span class="title class_">Date</span>(date) : <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="keyword">const</span> dateObjYear = dateObj.<span class="title function_">getFullYear</span>();</span><br><span class="line">        <span class="keyword">const</span> dateObjMonth = <span class="title class_">String</span>(dateObj.<span class="title function_">getMonth</span>() + <span class="number">1</span>).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> dateObjDay = <span class="title class_">String</span>(dateObj.<span class="title function_">getDate</span>()).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> dateObjHour = <span class="title class_">String</span>(dateObj.<span class="title function_">getHours</span>()).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> dateObjMinute = <span class="title class_">String</span>(dateObj.<span class="title function_">getMinutes</span>()).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> dateObjSecond = <span class="title class_">String</span>(dateObj.<span class="title function_">getSeconds</span>()).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 处理标题</span></span><br><span class="line">        <span class="keyword">const</span> processedTitle = title.<span class="title function_">toLowerCase</span>().<span class="title function_">replace</span>(<span class="regexp">/\s+/g</span>, <span class="string">&#x27;-&#x27;</span>).<span class="title function_">replace</span>(<span class="regexp">/[^\w\-]+/g</span>, <span class="string">&#x27;&#x27;</span>).<span class="title function_">replace</span>(<span class="regexp">/\-\-+/g</span>, <span class="string">&#x27;-&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 处理分类</span></span><br><span class="line">        <span class="keyword">let</span> processedCategories = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (categories &amp;&amp; <span class="title class_">Array</span>.<span class="title function_">isArray</span>(categories)) &#123;</span><br><span class="line">            processedCategories = categories.<span class="title function_">join</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (categories &amp;&amp; <span class="keyword">typeof</span> categories === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">            processedCategories = categories;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 替换permalink变量</span></span><br><span class="line">        permalinkStr = permalinkStr</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="string">&#x27;:year&#x27;</span>, year || dateObjYear)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="string">&#x27;:month&#x27;</span>, month || dateObjMonth)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="string">&#x27;:day&#x27;</span>, day || dateObjDay)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="string">&#x27;:hour&#x27;</span>, hour || dateObjHour)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="string">&#x27;:minute&#x27;</span>, minute || dateObjMinute)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="string">&#x27;:second&#x27;</span>, second || dateObjSecond)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="string">&#x27;:title&#x27;</span>, processedTitle)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="string">&#x27;:abbrlink&#x27;</span>, abbrlink || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="string">&#x27;:category&#x27;</span>, processedCategories);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 确保以/开头</span></span><br><span class="line">        <span class="keyword">if</span> (!permalinkStr.<span class="title function_">startsWith</span>(<span class="string">&#x27;/&#x27;</span>)) &#123;</span><br><span class="line">            permalinkStr = <span class="string">&#x27;/&#x27;</span> + permalinkStr;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> permalinkStr;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">start</span>(<span class="params">postDir</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> posts = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">readPosts</span>(postDir);</span><br><span class="line">        <span class="comment">// 报错的数据</span></span><br><span class="line">        <span class="keyword">const</span> errorData = [];</span><br><span class="line">        <span class="comment">// 已经初始化的数据</span></span><br><span class="line">        <span class="keyword">const</span> initializedData = [];</span><br><span class="line">        <span class="comment">// 成功初始化数据</span></span><br><span class="line">        <span class="keyword">const</span> successData = [];</span><br><span class="line">        <span class="comment">// 需要在浏览器中打开的URL列表</span></span><br><span class="line">        <span class="keyword">const</span> urlsToOpen = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> posts) &#123;</span><br><span class="line">            <span class="comment">// 使用Hexo permalink格式生成pathname</span></span><br><span class="line">            <span class="keyword">const</span> pathname = <span class="variable language_">this</span>.<span class="title function_">generatePermalink</span>(item);</span><br><span class="line">            <span class="keyword">const</span> &#123; title &#125; = item;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 检查是否已经初始化（通过缓存或 GitHub API）</span></span><br><span class="line">            <span class="keyword">const</span> isInitialized = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">getIsInitByCache</span>(pathname, title);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (isInitialized) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[36m%s\x1b[0m`</span>, <span class="string">`文章已处理----[<span class="subst">$&#123;title&#125;</span>]`</span>);</span><br><span class="line">                initializedData.<span class="title function_">push</span>(&#123;pathname&#125;);  <span class="comment">// 只保存pathname</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">`[<span class="subst">$&#123;title&#125;</span>]----发现新文章 `</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如果配置了在浏览器中打开，则添加到URL列表（修改为包含URL和标题的对象）</span></span><br><span class="line">            <span class="keyword">if</span> (config.<span class="property">openInBrowser</span>) &#123;</span><br><span class="line">                <span class="keyword">const</span> fullUrl = <span class="string">`<span class="subst">$&#123;config.hexoUrl&#125;</span><span class="subst">$&#123;pathname&#125;</span>`</span>;</span><br><span class="line">                <span class="comment">// 修改：将URL和标题一起存储</span></span><br><span class="line">                urlsToOpen.<span class="title function_">push</span>(&#123;</span><br><span class="line">                    <span class="attr">url</span>: fullUrl,</span><br><span class="line">                    <span class="attr">title</span>: title</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            successData.<span class="title function_">push</span>(&#123;</span><br><span class="line">                pathname  <span class="comment">// 只保存pathname</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">`[<span class="subst">$&#123;title&#125;</span>]----文章已记录!`</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[32m%s\x1b[0m`</span>, <span class="string">`文章链接: <span class="subst">$&#123;config.hexoUrl&#125;</span><span class="subst">$&#123;pathname&#125;</span>`</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在所有文章处理完成后，分批打开URL，同时模拟鼠标活动，最后统一关闭浏览器</span></span><br><span class="line">        <span class="keyword">if</span> (config.<span class="property">openInBrowser</span> &amp;&amp; urlsToOpen.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>,<span class="string">&#x27;##########################################访问网页##########################################&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 根据maxPagesToOpen的值决定处理方式</span></span><br><span class="line">            <span class="keyword">if</span> (config.<span class="property">maxPagesToOpen</span> === <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 如果maxPagesToOpen为0，一次性打开所有页面</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`准备一次性打开所有 <span class="subst">$&#123;urlsToOpen.length&#125;</span> 个页面`</span>);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">                <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">openUrlsSequentially</span>(urlsToOpen, config.<span class="property">browserWaitTime</span>, <span class="number">0</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">                <span class="comment">// 如果maxPagesToOpen大于0，分批处理页面</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>, <span class="string">`准备分批打开页面，每批 <span class="subst">$&#123;config.maxPagesToOpen&#125;</span> 个，共 <span class="subst">$&#123;urlsToOpen.length&#125;</span> 个`</span>);</span><br><span class="line">                <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">openUrlsInBatches</span>(urlsToOpen, config.<span class="property">browserWaitTime</span>, config.<span class="property">maxPagesToOpen</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[33m%s\x1b[0m`</span>,<span class="string">&#x27;##########################################访问网页##########################################&#x27;</span>)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>); <span class="comment">// 空输出，用于换行</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[35m%s\x1b[0m`</span>, <span class="string">&#x27;##########################################运行结果##########################################&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (errorData.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[31m%s\x1b[0m`</span>, <span class="string">`报错数据： <span class="subst">$&#123;errorData.length&#125;</span> 条。`</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(errorData, <span class="literal">null</span>, <span class="number">2</span>))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[35m%s\x1b[0m`</span>, <span class="string">`本次成功： <span class="subst">$&#123;successData.length&#125;</span> 条。`</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 写入缓存</span></span><br><span class="line">        <span class="keyword">if</span> (config.<span class="property">enableCache</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[35m%s\x1b[0m`</span>, <span class="string">`写入缓存： <span class="subst">$&#123;(initializedData.length + successData.length)&#125;</span> 条，已处理 <span class="subst">$&#123;initializedData.length&#125;</span> 条，本次成功： <span class="subst">$&#123;successData.length&#125;</span> 条。参考文件 <span class="subst">$&#123;config.cacheFile&#125;</span>。`</span>);</span><br><span class="line">            <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">write</span>(config.<span class="property">cacheFile</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(initializedData.<span class="title function_">concat</span>(successData), <span class="literal">null</span>, <span class="number">2</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\x1b[35m%s\x1b[0m`</span>, <span class="string">`已处理： <span class="subst">$&#123;initializedData.length&#125;</span> 条。`</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新增：在执行脚本前检查 Butterfly 主题配置</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">checkButterflyCommentsConfig</span>()) &#123;</span><br><span class="line">    <span class="comment">// 只有当 Gitalk 是第一个评论系统时才执行脚本</span></span><br><span class="line">    autoGitalkInit.<span class="title function_">start</span>(config.<span class="property">postsDir</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;\x1b[35m%s\x1b[0m&#x27;</span>,<span class="string">&#x27;文章处理完成&#x27;</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;\x1b[35m%s\x1b[0m&#x27;</span>,<span class="string">&#x27;##########################################运行结果##########################################&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 如果 Gitalk 不是第一个评论系统或不包含在评论系统中，则不执行脚本</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;\x1b[31m%s\x1b[0m&#x27;</span>, <span class="string">&#x27;脚本执行已停止，请先修改配置项中的 Butterfly 主题配置文件路径&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;\x1b[31m%s\x1b[0m&#x27;</span>, <span class="string">&#x27;##########################################脚本已停止##########################################&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在该目录下打开<code>cmd</code>，输入以下命令运行脚本。</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node gitalk_init.js</span><br></pre></td></tr></table></figure><p>等待脚本运行完成，查看仓库生成的Issue即可。</p><div class="note warning flat"><p>注意：脚本运行过程中会调用默认浏览器模拟访问和关闭网页。</p></div><details class="folding-tag" green open><summary>博客搭建系列文章</summary><div class="content"><ol class="series-items"><li><a href="/yyg/2eca17c7/" title="Gitalk自动创建评论Issues">Gitalk自动创建评论Issues</a></li><li><a href="/yyg/e102aa73/" title="Hexo-Butterfly美化教程-[1]基础环境">Hexo-Butterfly美化教程-[1]基础环境</a></li><li><a href="/yyg/80ffa402/" title="Hexo-Butterfly美化教程-[2]Butterfly主题安装">Hexo-Butterfly美化教程-[2]Butterfly主题安装</a></li><li><a href="/yyg/b2261cee/" title="Hexo-Butterfly美化教程-[3]建主要页面">Hexo-Butterfly美化教程-[3]建主要页面</a></li><li><a href="/yyg/8a5ee3aa/" title="Hexo-Butterfly美化教程-[4]修改配置文件">Hexo-Butterfly美化教程-[4]修改配置文件</a></li><li><a href="/yyg/23010111/" title="Hexo-Butterfly美化教程-[5]安装常用插件">Hexo-Butterfly美化教程-[5]安装常用插件</a></li><li><a href="/yyg/5986cad/" title="Hexo-Butterfly美化教程-[6]开启博客评论">Hexo-Butterfly美化教程-[6]开启博客评论</a></li><li><a href="/yyg/5baeb6c6/" title="Hexo-Butterfly美化教程-[7]功能魔改(源码方式)">Hexo-Butterfly美化教程-[7]功能魔改(源码方式)</a></li><li><a href="/yyg/5f747cff/" title="Hexo-Butterfly美化教程-[8]随鼠标变幻的动态粒子线条背景">Hexo-Butterfly美化教程-[8]随鼠标变幻的动态粒子线条背景</a></li><li><a href="/yyg/ca46b09/" title="Hexo-Butterfly美化教程-[9]繁沙">Hexo-Butterfly美化教程-[9]繁沙</a></li><li><a href="/yyg/37098f8c/" title="使用GitHub Actions实现Hexo博客的自动化发布">使用GitHub Actions实现Hexo博客的自动化发布</a></li><li><a href="/yyg/5ea27f40/" title="在Github上使用OsmosFeed搭建在线RSS阅读器（无需服务器）">在Github上使用OsmosFeed搭建在线RSS阅读器（无需服务器）</a></li></ol></div></details></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者:</span> <span class="post-copyright-info"><a href="https://yyg.js.cool/">云野阁</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接:</span> <span class="post-copyright-info"><a href="https://yyg.js.cool/yyg/2eca17c7/">https://yyg.js.cool/yyg/2eca17c7/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://yyg.js.cool" target="_blank">云野阁</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%8D%9A%E5%AE%A2/">博客</a><a class="post-meta__tags" href="/tags/%E9%AD%94%E6%94%B9/">魔改</a><a class="post-meta__tags" href="/tags/Gitalk/">Gitalk</a><a class="post-meta__tags" href="/tags/Issues/">Issues</a></div><div class="post-share"><div class="social-share" data-image="https://api.mmp.cc/api/pcwallpaper?category=cool&amp;type=jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/butterfly-extsrc/1.1.4/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://s4.zstatic.net/ajax/libs/butterfly-extsrc/1.1.4/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/yyg/986299a9/" title="k8s知识梳理--进阶"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://t.alcy.cc/fj" onerror='onerror=null,src="/img/icon.png"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">k8s知识梳理--进阶</div></div><div class="info-2"><div class="info-item-1">网络Kubernetes-网络模型原则 在不使用网络地址转换(NAT)的情况下，集群中的Pod能够与任意其他Pod进行通信 在不使用网络地址转换(NAT)的情况下，在集群节点上运行的程序能与同一节点上的任何Pod进行通信 每个Pod都...</div></div></div></a><a class="pagination-related" href="/yyg/fd7b65ac/" title="RssWe--支持PWA的RSS和播客在线阅读器"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://yyg.js.cool/yyghub/img/512.png" onerror='onerror=null,src="/img/icon.png"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">RssWe--支持PWA的RSS和播客在线阅读器</div></div><div class="info-2"><div class="info-item-1">前言RssWe 的诞生，源于我对rssTea的真实体验。在订阅播客时，时常遇到音频无法加载或显示的窘境；并且，随着订阅源日益增多，列表变得杂乱无章，难以快速定位。当文章列表过长时，想返回顶部或直接查看特定播客内容也变得异常繁琐。 想着...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/yyg/37098f8c/" title="使用GitHub Actions实现Hexo博客的自动化发布"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bing.img.run/rand_uhd.php" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-06</div><div class="info-item-2">使用GitHub Actions实现Hexo博客的自动化发布</div></div><div class="info-2"><div class="info-item-1">基础环境原环境仓库：存放静态网页的仓库（公开） 工作流：本地撰写博客—&gt;执行编译，生成静态网页—&gt;推送静态网页到仓库—&gt;访问发布的网页 新环境仓库1：存放博客源码的仓库（私有） 仓库2：存放静态网页的仓库（公开） 工...</div></div></div></a><a class="pagination-related" href="/yyg/5ea27f40/" title="在Github上使用OsmosFeed搭建在线RSS阅读器（无需服务器）"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgapi.cn/api.php?fl=fengjing&gs=images" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-26</div><div class="info-item-2">在Github上使用OsmosFeed搭建在线RSS阅读器（无需服务器）</div></div><div class="info-2"><div class="info-item-1">在Github上使用OsmosFeed搭建在线RSS阅读器（无需服务器）前言在搭建云野阁博客网站期间，看了好多具有个人特色的博客网站，有不少都有RSS订阅功能，那RSS是什么呢？咱们先唠唠。 🔜RSS🔚 ...</div></div></div></a></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div><div class="comment-switch"><span class="first-comment">Giscus</span><span id="switch-btn"></span><span class="second-comment">Utterances</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div><div><div id="utterances-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/icon.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">云野阁</div><div class="author-info-description">闲云野鹤，八方逍遥</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">65</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">118</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">40</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/MarsperL" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a><a class="social-icon" href="mailto:eXlnbGlAZm94bWFpbC5jb20=" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a><a class="social-icon" href="/rss2.xml" target="_blank"><i class="fas fa-rss"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E6%B5%81%E7%A8%8B"><span class="toc-number">1.</span> <span class="toc-text">功能流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">2.</span> <span class="toc-text">自定义配置项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%A1%B9%E8%AF%B4%E6%98%8E"><span class="toc-number">2.1.</span> <span class="toc-text">配置项说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GitHub-%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="toc-number">2.2.</span> <span class="toc-text">GitHub 相关配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="toc-number">2.3.</span> <span class="toc-text">缓存相关配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GitHub-API-%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="toc-number">2.4.</span> <span class="toc-text">GitHub API 相关配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E4%B8%8E%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE"><span class="toc-number">2.5.</span> <span class="toc-text">文章与博客配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%87%AA%E5%8A%A8%E5%8C%96%E9%85%8D%E7%BD%AE"><span class="toc-number">2.6.</span> <span class="toc-text">浏览器自动化配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE"><span class="toc-number">2.7.</span> <span class="toc-text">主题配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text">实现方式</span></a></li></ol></div></div><div class="card-widget card-post-series"><div class="item-headline"><i class="fa-solid fa-layer-group"></i><span>博客搭建教程</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/yyg/2eca17c7/" title="Gitalk自动创建评论Issues"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.mmp.cc/api/pcwallpaper?category=cool&amp;type=jpg" onerror='this.onerror=null,this.src="/img/icon.png"' alt="Gitalk自动创建评论Issues"></a><div class="content"><a class="title" href="/yyg/2eca17c7/" title="Gitalk自动创建评论Issues">Gitalk自动创建评论Issues</a><time datetime="2025-10-08T14:06:07.000Z" title="发表于 2025-10-08 22:06:07">2025-10-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/e102aa73/" title="Hexo-Butterfly美化教程-[1]基础环境"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://t.alcy.cc/fj" onerror='this.onerror=null,this.src="/img/icon.png"' alt="Hexo-Butterfly美化教程-[1]基础环境"></a><div class="content"><a class="title" href="/yyg/e102aa73/" title="Hexo-Butterfly美化教程-[1]基础环境">Hexo-Butterfly美化教程-[1]基础环境</a><time datetime="2024-07-15T07:14:39.000Z" title="发表于 2024-07-15 15:14:39">2024-07-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/80ffa402/" title="Hexo-Butterfly美化教程-[2]Butterfly主题安装"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wp.upx8.com/api.php?content=风景" onerror='this.onerror=null,this.src="/img/icon.png"' alt="Hexo-Butterfly美化教程-[2]Butterfly主题安装"></a><div class="content"><a class="title" href="/yyg/80ffa402/" title="Hexo-Butterfly美化教程-[2]Butterfly主题安装">Hexo-Butterfly美化教程-[2]Butterfly主题安装</a><time datetime="2025-03-10T07:14:39.000Z" title="发表于 2025-03-10 15:14:39">2025-03-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/b2261cee/" title="Hexo-Butterfly美化教程-[3]建主要页面"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.yumus.cn/api/?target=img&amp;brand=360&amp;type=3" onerror='this.onerror=null,this.src="/img/icon.png"' alt="Hexo-Butterfly美化教程-[3]建主要页面"></a><div class="content"><a class="title" href="/yyg/b2261cee/" title="Hexo-Butterfly美化教程-[3]建主要页面">Hexo-Butterfly美化教程-[3]建主要页面</a><time datetime="2025-05-19T08:53:35.000Z" title="发表于 2025-05-19 16:53:35">2025-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/8a5ee3aa/" title="Hexo-Butterfly美化教程-[4]修改配置文件"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://unsplash.it/1600/900?random" onerror='this.onerror=null,this.src="/img/icon.png"' alt="Hexo-Butterfly美化教程-[4]修改配置文件"></a><div class="content"><a class="title" href="/yyg/8a5ee3aa/" title="Hexo-Butterfly美化教程-[4]修改配置文件">Hexo-Butterfly美化教程-[4]修改配置文件</a><time datetime="2025-05-19T10:57:45.000Z" title="发表于 2025-05-19 18:57:45">2025-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/23010111/" title="Hexo-Butterfly美化教程-[5]安装常用插件"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://tu.ltyuanfang.cn/api/fengjing.php" onerror='this.onerror=null,this.src="/img/icon.png"' alt="Hexo-Butterfly美化教程-[5]安装常用插件"></a><div class="content"><a class="title" href="/yyg/23010111/" title="Hexo-Butterfly美化教程-[5]安装常用插件">Hexo-Butterfly美化教程-[5]安装常用插件</a><time datetime="2025-05-19T10:58:52.000Z" title="发表于 2025-05-19 18:58:52">2025-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/5986cad/" title="Hexo-Butterfly美化教程-[6]开启博客评论"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgapi.cn/api.php?fl=fengjing&amp;gs=images" onerror='this.onerror=null,this.src="/img/icon.png"' alt="Hexo-Butterfly美化教程-[6]开启博客评论"></a><div class="content"><a class="title" href="/yyg/5986cad/" title="Hexo-Butterfly美化教程-[6]开启博客评论">Hexo-Butterfly美化教程-[6]开启博客评论</a><time datetime="2025-05-21T14:21:16.000Z" title="发表于 2025-05-21 22:21:16">2025-05-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/5baeb6c6/" title="Hexo-Butterfly美化教程-[7]功能魔改(源码方式)"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.mmp.cc/api/pcwallpaper?category=cool&amp;type=jpg" onerror='this.onerror=null,this.src="/img/icon.png"' alt="Hexo-Butterfly美化教程-[7]功能魔改(源码方式)"></a><div class="content"><a class="title" href="/yyg/5baeb6c6/" title="Hexo-Butterfly美化教程-[7]功能魔改(源码方式)">Hexo-Butterfly美化教程-[7]功能魔改(源码方式)</a><time datetime="2025-05-20T09:01:06.000Z" title="发表于 2025-05-20 17:01:06">2025-05-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/5f747cff/" title="Hexo-Butterfly美化教程-[8]随鼠标变幻的动态粒子线条背景"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://random-img.pupper.cn/api" onerror='this.onerror=null,this.src="/img/icon.png"' alt="Hexo-Butterfly美化教程-[8]随鼠标变幻的动态粒子线条背景"></a><div class="content"><a class="title" href="/yyg/5f747cff/" title="Hexo-Butterfly美化教程-[8]随鼠标变幻的动态粒子线条背景">Hexo-Butterfly美化教程-[8]随鼠标变幻的动态粒子线条背景</a><time datetime="2025-05-23T15:52:39.000Z" title="发表于 2025-05-23 23:52:39">2025-05-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/ca46b09/" title="Hexo-Butterfly美化教程-[9]繁沙"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.mmp.cc/api/pcwallpaper?category=cool&amp;type=jpg" onerror='this.onerror=null,this.src="/img/icon.png"' alt="Hexo-Butterfly美化教程-[9]繁沙"></a><div class="content"><a class="title" href="/yyg/ca46b09/" title="Hexo-Butterfly美化教程-[9]繁沙">Hexo-Butterfly美化教程-[9]繁沙</a><time datetime="2024-08-07T15:43:30.000Z" title="发表于 2024-08-07 23:43:30">2024-08-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/37098f8c/" title="使用GitHub Actions实现Hexo博客的自动化发布"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bing.img.run/rand_uhd.php" onerror='this.onerror=null,this.src="/img/icon.png"' alt="使用GitHub Actions实现Hexo博客的自动化发布"></a><div class="content"><a class="title" href="/yyg/37098f8c/" title="使用GitHub Actions实现Hexo博客的自动化发布">使用GitHub Actions实现Hexo博客的自动化发布</a><time datetime="2025-07-06T13:43:23.000Z" title="发表于 2025-07-06 21:43:23">2025-07-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/5ea27f40/" title="在Github上使用OsmosFeed搭建在线RSS阅读器（无需服务器）"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgapi.cn/api.php?fl=fengjing&amp;gs=images" onerror='this.onerror=null,this.src="/img/icon.png"' alt="在Github上使用OsmosFeed搭建在线RSS阅读器（无需服务器）"></a><div class="content"><a class="title" href="/yyg/5ea27f40/" title="在Github上使用OsmosFeed搭建在线RSS阅读器（无需服务器）">在Github上使用OsmosFeed搭建在线RSS阅读器（无需服务器）</a><time datetime="2024-08-26T14:43:31.000Z" title="发表于 2024-08-26 22:43:31">2024-08-26</time></div></div></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/yyg/9131dcdb/" title="&quot;朝花夕拾&quot;--专注时钟"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://yyg.js.cool/focusclock/time/img/iconmonstr-time.png" onerror='this.onerror=null,this.src="/img/icon.png"' alt="&quot;朝花夕拾&quot;--专注时钟"></a><div class="content"><a class="title" href="/yyg/9131dcdb/" title="&quot;朝花夕拾&quot;--专注时钟">&quot;朝花夕拾&quot;--专注时钟</a><time datetime="2025-12-22T12:53:13.000Z" title="发表于 2025-12-22 20:53:13">2025-12-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/3f2b07b/" title="”新面“之缘"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://random-img.pupper.cn/api" onerror='this.onerror=null,this.src="/img/icon.png"' alt="”新面“之缘"></a><div class="content"><a class="title" href="/yyg/3f2b07b/" title="”新面“之缘">”新面“之缘</a><time datetime="2025-12-18T16:51:34.000Z" title="发表于 2025-12-19 00:51:34">2025-12-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/fd7b65ac/" title="RssWe--支持PWA的RSS和播客在线阅读器"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://yyg.js.cool/yyghub/img/512.png" onerror='this.onerror=null,this.src="/img/icon.png"' alt="RssWe--支持PWA的RSS和播客在线阅读器"></a><div class="content"><a class="title" href="/yyg/fd7b65ac/" title="RssWe--支持PWA的RSS和播客在线阅读器">RssWe--支持PWA的RSS和播客在线阅读器</a><time datetime="2025-11-29T05:31:50.000Z" title="发表于 2025-11-29 13:31:50">2025-11-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/2eca17c7/" title="Gitalk自动创建评论Issues"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.mmp.cc/api/pcwallpaper?category=cool&amp;type=jpg" onerror='this.onerror=null,this.src="/img/icon.png"' alt="Gitalk自动创建评论Issues"></a><div class="content"><a class="title" href="/yyg/2eca17c7/" title="Gitalk自动创建评论Issues">Gitalk自动创建评论Issues</a><time datetime="2025-10-08T14:06:07.000Z" title="发表于 2025-10-08 22:06:07">2025-10-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/yyg/986299a9/" title="k8s知识梳理--进阶"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://t.alcy.cc/fj" onerror='this.onerror=null,this.src="/img/icon.png"' alt="k8s知识梳理--进阶"></a><div class="content"><a class="title" href="/yyg/986299a9/" title="k8s知识梳理--进阶">k8s知识梳理--进阶</a><time datetime="2025-08-22T10:17:22.000Z" title="发表于 2025-08-22 18:17:22">2025-08-22</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2024 - 2026 By 云野阁</span></div><div class="footer_custom_text"><div id="runtime"></div>世界上只有一种真正的英雄主义，那就是看清生活的真相之后，依然热爱生活</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight,500)"><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js?v=5.5.1"></script><script src="/js/main.js?v=5.5.1"></script><script src="https://s4.zstatic.net/ajax/libs/fancyapps-ui/5.0.36/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://s4.zstatic.net/ajax/libs/vanilla-lazyload/19.1.3/lazyload.iife.min.js"></script><div class="js-pjax"><script>(()=>{const e=()=>{(()=>{const e=document.querySelectorAll("pre > code.mermaid");0!==e.length&&e.forEach(e=>{const t=document.createElement("pre");t.className="mermaid-src",t.hidden=!0,t.textContent=e.textContent;const n=document.createElement("div");n.className="mermaid-wrap",n.appendChild(t),e.parentNode.replaceWith(n)})})();const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>(e=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";e.forEach((e,n)=>{const d=e.firstElementChild,a=`mermaid-${n}`,r=`%%{init:{ 'theme':'${t}'}}%%\n`+d.textContent,m=mermaid.render(a,r),o=e=>{d.insertAdjacentHTML("afterend",e)};"string"==typeof m?o(m):m.then(({svg:e})=>o(e))})})(e);btf.addGlobalFn("themeChange",t,"mermaid"),window.loadMermaid?t():btf.getScript("https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js").then(t)};btf.addGlobalFn("encrypt",e,"mermaid"),window.pjax?e():document.addEventListener("DOMContentLoaded",e)})()</script><script>(()=>{const t="shuoshuo"===GLOBAL_CONFIG_SITE.pageType,e={"data-lang":"zh-CN","data-input-position":"top","data-loading":"lazy"},a=t=>"dark"===t?"noborder_dark":"noborder_light",s=(s=document,o)=>{const n=t?{"data-mapping":"specific","data-term":o}:{"data-mapping":e&&e["data-mapping"]||"pathname"},d=(t=>{const e=document.createElement("script");return Object.entries(t).forEach(([t,a])=>{e.setAttribute(t,a)}),e})({src:"https://giscus.app/client.js","data-repo":"MarsperL/MarsperL.github.io","data-repo-id":"R_kgDOHV6bsQ","data-category-id":"DIC_kwDOHV6bsc4Cd54m","data-theme":a(document.documentElement.getAttribute("data-theme")),"data-reactions-enabled":"1",crossorigin:"anonymous",async:!0,...e,...n});s.querySelector("#giscus-wrap").appendChild(d),t&&(window.shuoshuoComment.destroyGiscus=()=>{s.children.length&&(s.innerHTML="",s.classList.add("no-comment"))})};btf.addGlobalFn("themeChange",t=>{const e=document.querySelector("#giscus-wrap iframe");if(e){const s={giscus:{setConfig:{theme:a(t)}}};e.contentWindow.postMessage(s,"https://giscus.app")}},"giscus"),t?window.shuoshuoComment={loadComment:s}:s()})()</script><script>(()=>{const e="shuoshuo"===GLOBAL_CONFIG_SITE.pageType,t={label:"Utterances"},n=e=>"dark"===e?"dark-blue":"github-light",s=(s=document,r)=>{e&&(window.shuoshuoComment.destroyUtterances=()=>{s.children.length&&(s.innerHTML="",s.classList.add("no-comment"))});const o={src:"https://utteranc.es/client.js",repo:"MarsperL/yygyws",theme:n(document.documentElement.getAttribute("data-theme")),crossorigin:"anonymous",async:!0,...t,"issue-term":e?r:t&&t["issue-term"]||"title"},c=document.createElement("script");Object.entries(o).forEach(([e,t])=>c.setAttribute(e,t)),s.querySelector("#utterances-wrap").appendChild(c)};btf.addGlobalFn("themeChange",e=>{const t=document.querySelector("#utterances-wrap iframe");if(t){const s={type:"set-theme",theme:n(e)};t.contentWindow.postMessage(s,"https://utteranc.es")}},"utterances"),e?window.loadOtherComment=s:s()})()</script></div><script src="/js/parts.js"></script><script src="/js/background.js"></script><script>(()=>{const t=!0,a=!0,e=!0,i=null,n=()=>{"undefined"!=typeof umami&&"function"==typeof umami.track?umami.track(t=>({...t,url:window.location.pathname,title:GLOBAL_CONFIG_SITE.title})):console.warn("Umami Analytics: umami.track is not available")},o=async t=>{try{const a=Date.now(),e=t?`&url=${window.location.pathname}`:"",n={Accept:"application/json"};n.Authorization=`Bearer ${i}`;const o=await fetch(`https://nyyg.qzz.io/api/websites/8547f37e-b38b-4b91-a2ee-6dbbe66a8890/stats?startAt=0000000000&endAt=${a}${e}`,{method:"GET",headers:n});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(t){throw console.error("Umami Analytics: Failed to fetch data",t),t}},s=async()=>{try{if("post"===GLOBAL_CONFIG_SITE.pageType&&e){const t=document.getElementById("umamiPV");if(t){const a=await o(!0);a&&a.pageviews&&void 0!==a.pageviews.value?t.textContent=a.pageviews.value:console.warn("Umami Analytics: Invalid page view data received")}}if(t||a){const e=await o(!1);if(t){const t=document.getElementById("umami-site-uv");t&&e&&e.visitors&&void 0!==e.visitors.value?t.textContent=e.visitors.value:t&&console.warn("Umami Analytics: Invalid site UV data received")}if(a){const t=document.getElementById("umami-site-pv");t&&e&&e.pageviews&&void 0!==e.pageviews.value?t.textContent=e.pageviews.value:t&&console.warn("Umami Analytics: Invalid site PV data received")}}}catch(t){console.error("Umami Analytics: Failed to insert data",t)}};btf.addGlobalFn("pjaxComplete",n,"umami_analytics_run_track"),btf.addGlobalFn("pjaxComplete",s,"umami_analytics_insert"),btf.getScript("https://nyyg.qzz.io/script.js",{"data-website-id":"8547f37e-b38b-4b91-a2ee-6dbbe66a8890","data-auto-track":"false"}).then(()=>{n()}).catch(t=>{console.error("Umami Analytics: Error loading script",t)}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):setTimeout(s,100)})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"></div><hr><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.1"></script></div></div><script data-pjax>function butterfly_swiper_injector_config(){var a=document.getElementById("recent-posts");console.log("已挂载butterfly_swiper"),a.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="yyg/fd7b65ac/" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://yyg.js.cool/yyghub/img/512.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-11-29</span><a class="blog-slider__title" href="yyg/fd7b65ac/" alt="">RssWe--支持PWA的RSS和播客在线阅读器</a><div class="blog-slider__text">点击查看置顶文章啦~~~</div><a class="blog-slider__button" href="yyg/fd7b65ac/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="yyg/e102aa73/" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://t.alcy.cc/fj" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-07-15</span><a class="blog-slider__title" href="yyg/e102aa73/" alt="">Hexo-Butterfly美化教程-[1]基础环境</a><div class="blog-slider__text">点击查看置顶文章啦~~~</div><a class="blog-slider__button" href="yyg/e102aa73/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="yyg/80ffa402/" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://wp.upx8.com/api.php?content=风景" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-10</span><a class="blog-slider__title" href="yyg/80ffa402/" alt="">Hexo-Butterfly美化教程-[2]Butterfly主题安装</a><div class="blog-slider__text">点击查看置顶文章啦~~~</div><a class="blog-slider__button" href="yyg/80ffa402/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="yyg/b2261cee/" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.yumus.cn/api/?target=img&amp;brand=360&amp;type=3" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-05-19</span><a class="blog-slider__title" href="yyg/b2261cee/" alt="">Hexo-Butterfly美化教程-[3]建主要页面</a><div class="blog-slider__text">点击查看置顶文章啦~~~</div><a class="blog-slider__button" href="yyg/b2261cee/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="yyg/8a5ee3aa/" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://unsplash.it/1600/900?random" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-05-19</span><a class="blog-slider__title" href="yyg/8a5ee3aa/" alt="">Hexo-Butterfly美化教程-[4]修改配置文件</a><div class="blog-slider__text">点击查看置顶文章啦~~~</div><a class="blog-slider__button" href="yyg/8a5ee3aa/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="yyg/23010111/" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://tu.ltyuanfang.cn/api/fengjing.php" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-05-19</span><a class="blog-slider__title" href="yyg/23010111/" alt="">Hexo-Butterfly美化教程-[5]安装常用插件</a><div class="blog-slider__text">点击查看置顶文章啦~~~</div><a class="blog-slider__button" href="yyg/23010111/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="yyg/5986cad/" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgapi.cn/api.php?fl=fengjing&amp;gs=images" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-05-21</span><a class="blog-slider__title" href="yyg/5986cad/" alt="">Hexo-Butterfly美化教程-[6]开启博客评论</a><div class="blog-slider__text">点击查看置顶文章啦~~~</div><a class="blog-slider__button" href="yyg/5986cad/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="yyg/5baeb6c6/" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.mmp.cc/api/pcwallpaper?category=cool&amp;type=jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-05-20</span><a class="blog-slider__title" href="yyg/5baeb6c6/" alt="">Hexo-Butterfly美化教程-[7]功能魔改(源码方式)</a><div class="blog-slider__text">点击查看置顶文章啦~~~</div><a class="blog-slider__button" href="yyg/5baeb6c6/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="yyg/5f747cff/" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://random-img.pupper.cn/api" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-05-23</span><a class="blog-slider__title" href="yyg/5f747cff/" alt="">Hexo-Butterfly美化教程-[8]随鼠标变幻的动态粒子线条背景</a><div class="blog-slider__text">点击查看置顶文章啦~~~</div><a class="blog-slider__button" href="yyg/5f747cff/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="yyg/ca46b09/" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.mmp.cc/api/pcwallpaper?category=cool&amp;type=jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-07</span><a class="blog-slider__title" href="yyg/ca46b09/" alt="">Hexo-Butterfly美化教程-[9]繁沙</a><div class="blog-slider__text">点击查看置顶文章啦~~~</div><a class="blog-slider__button" href="yyg/ca46b09/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="yyg/5ea27f40/" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgapi.cn/api.php?fl=fengjing&amp;gs=images" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-26</span><a class="blog-slider__title" href="yyg/5ea27f40/" alt="">在Github上使用OsmosFeed搭建在线RSS阅读器（无需服务器）</a><div class="blog-slider__text">点击查看置顶文章啦~~~</div><a class="blog-slider__button" href="yyg/5ea27f40/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="yyg/37098f8c/" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bing.img.run/rand_uhd.php" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-07-06</span><a class="blog-slider__title" href="yyg/37098f8c/" alt="">使用GitHub Actions实现Hexo博客的自动化发布</a><div class="blog-slider__text">点击查看置顶文章啦~~~</div><a class="blog-slider__button" href="yyg/37098f8c/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script></body></html>