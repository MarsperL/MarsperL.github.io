function refreshCache(){if(confirm("是否确定清除所有缓存并重新加载页面？")){const e=document.getElementById("refresh-btn");e&&(e.disabled=!0,e.textContent="正在清除缓存..."),(async()=>{try{if(!("caches"in window))throw new Error("当前浏览器不支持 Cache API");const t=await caches.keys();if(console.log(`找到 ${t.length} 个缓存，准备删除...`,t),0===t.length)return alert("没有找到任何缓存数据。"),void(e&&(e.disabled=!1,e.textContent="清除所有缓存"));await Promise.all(t.map(e=>(console.log("正在删除缓存:",e),caches.delete(e)))),console.log("所有缓存已成功删除。"),console.log("缓存清理完成，即将重新加载页面..."),window.location.reload()}catch(t){console.error("清除缓存时出错:",t),alert("清除缓存失败，请查看控制台获取详细信息。"),e&&(e.disabled=!1,e.textContent="清除所有缓存")}})()}}document.getElementById("refresh-btn")?.addEventListener("click",refreshCache);