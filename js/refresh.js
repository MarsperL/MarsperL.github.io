function refreshCache(){if(confirm("是否确定刷新 JSON 数据缓存？这将清除所有缓存的 JSON 文件并重新加载页面。")){const e=document.getElementById("refresh-btn");e&&(e.disabled=!0,e.textContent="正在刷新JSON..."),(async()=>{try{if(!("caches"in window))throw new Error("当前浏览器不支持 Cache API");const e="BlogCache";let o;try{o=await caches.open(e)}catch(o){return console.warn(`无法打开缓存 "${e}"，可能不存在。`),void window.location.reload()}const t=await o.keys();console.log(`找到 ${t.length} 个缓存条目，准备筛选 JSON 文件...`);const n=t.filter(e=>e.url.endsWith(".json"));console.log(`找到 ${n.length} 个 JSON 文件，准备删除...`),0===n.length?alert("未找到任何已缓存的 JSON 文件。"):(await Promise.all(n.map(e=>(console.log("正在删除 JSON 缓存:",e.url),o.delete(e)))),console.log("所有 JSON 缓存已成功删除。")),console.log("JSON 缓存清理完成，即将重新加载页面..."),window.location.reload()}catch(o){console.error("刷新 JSON 缓存时出错:",o),alert("刷新 JSON 缓存失败，请查看控制台获取详细信息。"),e&&(e.disabled=!1,e.textContent="刷新JSON缓存")}})()}}document.getElementById("refresh-btn")?.addEventListener("click",refreshCache);