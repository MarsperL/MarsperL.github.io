function randomPost(){fetch("/baidusitemap.xml").then(e=>e.text()).then(e=>(new window.DOMParser).parseFromString(e,"text/xml")).then(e=>{let t=e.querySelectorAll("url loc"),n=window.location.pathname,o=Array.from(t).map(e=>new URL(e.innerHTML).pathname).filter(e=>e!==n);if(0===o.length)return void console.warn("No different URLs found in sitemap");let a=Math.floor(Math.random()*o.length);window.location.href=o[a]}).catch(e=>{console.error("Failed to fetch or parse sitemap:",e)})}const CREATE_TIME=new Date("2024-03-07T21:51:00").getTime(),TIME_UNITS=[{value:31536e6,label:" 年"},{value:864e5,label:" 天"},{value:36e5,label:" 时"},{value:6e4,label:" 分"},{value:1e3,label:" 秒"}];let currentFormat=0;function formatDuration(e){let t=e;return TIME_UNITS.map((e,n)=>{if(n<currentFormat)return null;const o=Math.floor(t/e.value);return t%=e.value,o>0?`${o}${e.label}`:""}).filter(Boolean).join(" ")}function updateRuntime(){const e=formatDuration(Date.now()-CREATE_TIME);document.getElementById("runtime").textContent=`本站已运行：${e}`}document.getElementById("runtime").addEventListener("click",()=>{currentFormat=(currentFormat+1)%4,updateRuntime()}),updateRuntime(),setInterval(updateRuntime,1e3);var icattoPage={toPage:function(){console.log("执行跳转");var e=document.querySelectorAll(".page-number"),t=parseInt(e[e.length-1].innerHTML),n=document.getElementById("toPageText"),o=parseInt(n.value);if(!isNaN(o)&&o>0&&o<=t){var a=1===o?"/":"/page/"+o+"/#content-inner";return window.location.href=a,!0}return alert("请输入有效的页码（1-"+t+"）"),n.focus(),!1},listenToPageInputPress:function(){var e=document.getElementById("toPageText"),t=document.getElementById("toPageButton");e&&(e.addEventListener("keydown",e=>{13===e.keyCode&&(e.preventDefault(),icattoPage.toPage())}),e.addEventListener("input",function(){var e=document.querySelectorAll(".page-number"),n=parseInt(e[e.length-1].innerHTML),o=parseInt(this.value)||0;t.classList.toggle("haveValue",this.value.length>0&&"0"!==this.value),o>n&&(this.value=n)}))}};document.addEventListener("DOMContentLoaded",function(){icattoPage.listenToPageInputPress()});const categoryItems=document.querySelectorAll(".category-list-item");function postAddToc(){const e=document.querySelector("#post > #article-container.post-content"),t=document.getElementById("card-toc");if(e&&t){const e=t.querySelectorAll(".toc-link"),n={};e.forEach(e=>{const t=decodeURIComponent(e.getAttribute("href").slice(1)),o=document.getElementById(t),a=e.querySelector(".toc-number").textContent;o&&(n[t]={element:o,tocNumber:a})}),Object.entries(n).forEach(([e,{element:t,tocNumber:n}])=>{t.dataset.toc=n})}}categoryItems.forEach((e,t)=>{const n=["📑","📚","🦋","💻","💬","✨"],o=n[Math.floor(Math.random()*n.length)];e.innerHTML=`\n    <div>${e.innerHTML}</div>\n    <div class="category-list-icon">${o}</div>`,function(){const t=`linear-gradient(${Math.floor(360*Math.random())}deg, #${Math.floor(16777215*Math.random()).toString(16)} 0%, #${Math.floor(16777215*Math.random()).toString(16)} 100%)`;e.style.backgroundImage=t}()}),postAddToc();